<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>n1å®‰è£…armbianä»¥åŠå®‰è£…dockerã€openwrt | ç„šé¦™çš„å°ç«™</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">n1å®‰è£…armbianä»¥åŠå®‰è£…dockerã€openwrt</h1><a id="logo" href="/.">ç„šé¦™çš„å°ç«™</a><p class="description">å‡¡äº‹åªåšå¼€å¤´</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">n1å®‰è£…armbianä»¥åŠå®‰è£…dockerã€openwrt</h1><div class="post-meta">2023-07-24<span> | </span><span class="category"><a href="/categories/N1%E7%9B%92%E5%AD%90/">N1ç›’å­</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.3k</span><span class="post-meta-item-text"> å­—</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 5</span><span class="post-meta-item-text"> åˆ†é’Ÿ</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B7%E5%85%A5Armbian"><span class="toc-number">1.</span> <span class="toc-text">åˆ·å…¥Armbian</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%8F%8A%E5%8D%87%E7%BA%A7-Armbian-%E7%9A%84%E7%9B%B8%E5%85%B3%E8%AF%B4%E6%98%8E"><span class="toc-number">2.</span> <span class="toc-text">å®‰è£…åŠå‡çº§ Armbian çš„ç›¸å…³è¯´æ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-Armbian-%E5%86%85%E6%A0%B8"><span class="toc-number">2.1.</span> <span class="toc-text">æ›´æ–° Armbian å†…æ ¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6"><span class="toc-number">2.2.</span> <span class="toc-text">å®‰è£…å¸¸ç”¨è½¯ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-Armbian-%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.</span> <span class="toc-text">ä¿®æ”¹ Armbian é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA-Armbian-%E5%88%9B%E5%BB%BA-swap"><span class="toc-number">2.4.</span> <span class="toc-text">ä¸º Armbian åˆ›å»º swap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD-%E8%BF%98%E5%8E%9F-EMMC-%E5%8E%9F%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.5.</span> <span class="toc-text">å¤‡ä»½&#x2F;è¿˜åŸ EMMC åŸç³»ç»Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E5%8D%8E%E6%BA%90-etc-apt-sources-list"><span class="toc-number">2.6.</span> <span class="toc-text">æ¸…åæº &#x2F;etc&#x2F;apt&#x2F;sources.list</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85docker"><span class="toc-number">3.</span> <span class="toc-text">å®‰è£…docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85docker%E7%AE%A1%E7%90%86%E9%9D%A2%E6%9D%BF"><span class="toc-number">3.1.</span> <span class="toc-text">å®‰è£…dockerç®¡ç†é¢æ¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85docker%E7%89%88openwrt"><span class="toc-number">3.2.</span> <span class="toc-text">å®‰è£…dockerç‰ˆopenwrt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.3.</span> <span class="toc-text">å…¶ä»–äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85docker%E7%89%88clash"><span class="toc-number">4.</span> <span class="toc-text">å®‰è£…dockerç‰ˆclash</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%84%B6%E5%90%8E%E7%9B%B4%E6%8E%A5%E8%B7%91%E8%B5%B7%E6%9D%A5%E5%B0%B1%E8%A1%8C%EF%BC%8C%E6%B3%A8%E6%84%8F%E6%98%A0%E5%B0%84%E4%B8%80%E4%B8%AA%E6%B2%A1%E5%9C%A8%E4%BD%BF%E7%94%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%B0%B1%E8%A1%8C"><span class="toc-number">4.0.1.</span> <span class="toc-text">ç„¶åç›´æ¥è·‘èµ·æ¥å°±è¡Œï¼Œæ³¨æ„æ˜ å°„ä¸€ä¸ªæ²¡åœ¨ä½¿ç”¨çš„ç«¯å£å°±è¡Œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E9%94%AE%E5%85%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%B0%E5%9D%80%E8%B7%9F%E7%AB%AF%E5%8F%A3%E5%8F%B7%EF%BC%8C%E6%88%91%E8%BF%99%E9%87%8C%E6%98%AF%E8%BE%93%E5%85%A5192-168-199-10-1234%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%89%93%E5%BC%80dashboard%E9%A1%B5%E9%9D%A2"><span class="toc-number">4.0.2.</span> <span class="toc-text">åœ¨æµè§ˆå™¨é”®å…¥æœåŠ¡å™¨åœ°å€è·Ÿç«¯å£å·ï¼Œæˆ‘è¿™é‡Œæ˜¯è¾“å…¥192.168.199.10:1234ï¼Œå°±å¯ä»¥æ‰“å¼€dashboardé¡µé¢</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2clash%E5%AE%B9%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text">éƒ¨ç½²clashå®¹å™¨</span></a></li></ol></div></div><div class="post-content"><p>å‚è€ƒæ•™ç¨‹ ï¼š[<a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/forum.php?mod=forumdisplay&fid=158&filter=typeid&typeid=21">N1ç›’å­]</a> <strong>N1åˆ·Armbianç³»ç»Ÿå¹¶åœ¨Dockerä¸­å®‰è£…OpenWrtæ—è·¯ç”±çš„è¯¦ç»†æ•™ç¨‹</strong></p>
<h2 id="åˆ·å…¥Armbian"><a href="#åˆ·å…¥Armbian" class="headerlink" title="åˆ·å…¥Armbian"></a>åˆ·å…¥Armbian</h2><p>Armbianï¼ˆä¸‹è½½åœ°å€ï¼‰ï¼š<a target="_blank" rel="noopener" href="https://github.com/ophub/amlogic-s9xxx-armbian">Armbian</a></p>
<p>è¾“å…¥å®˜æ–¹å†™å…¥EMMCå‘½ä»¤ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">armbian-<span class="keyword">install</span></span><br></pre></td></tr></table></figure>

<h2 id="å®‰è£…åŠå‡çº§-Armbian-çš„ç›¸å…³è¯´æ˜"><a href="#å®‰è£…åŠå‡çº§-Armbian-çš„ç›¸å…³è¯´æ˜" class="headerlink" title="å®‰è£…åŠå‡çº§ Armbian çš„ç›¸å…³è¯´æ˜"></a>å®‰è£…åŠå‡çº§ Armbian çš„ç›¸å…³è¯´æ˜</h2><p>ä¸­æ–‡è¯´æ˜ï¼š<a target="_blank" rel="noopener" href="https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/README.cn.md">https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/README.cn.md</a></p>
<h3 id="æ›´æ–°-Armbian-å†…æ ¸"><a href="#æ›´æ–°-Armbian-å†…æ ¸" class="headerlink" title="æ›´æ–° Armbian å†…æ ¸"></a>æ›´æ–° Armbian å†…æ ¸</h3><p>ç™»å½• Armbian ç³»ç»Ÿ â†’ è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ root ç”¨æˆ·è¿è¡Œ (sudo -i)</span></span><br><span class="line"><span class="comment"># å¦‚æœä¸æŒ‡å®šå‚æ•°ï¼Œå°†æ›´æ–°ä¸ºæœ€æ–°ç‰ˆæœ¬ã€‚</span></span><br><span class="line">armbian-<span class="keyword">update</span></span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…å¸¸ç”¨è½¯ä»¶"><a href="#å®‰è£…å¸¸ç”¨è½¯ä»¶" class="headerlink" title="å®‰è£…å¸¸ç”¨è½¯ä»¶"></a>å®‰è£…å¸¸ç”¨è½¯ä»¶</h3><p>ç™»å½• Armbian ç³»ç»Ÿ â†’ è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">armbian-software</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>armbian-software -u</code> å‘½ä»¤å¯ä»¥æ›´æ–°æœ¬åœ°çš„è½¯ä»¶ä¸­å¿ƒåˆ—è¡¨ã€‚æ ¹æ®ç”¨æˆ·åœ¨ <a target="_blank" rel="noopener" href="https://github.com/ophub/amlogic-s9xxx-armbian/issues">Issue</a> ä¸­çš„éœ€æ±‚åé¦ˆï¼Œé€æ­¥æ•´åˆå¸¸ç”¨<a target="_blank" rel="noopener" href="https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/build-armbian/armbian-files/common-files/usr/share/ophub/armbian-software/software-list.conf">è½¯ä»¶</a>ï¼Œå®ç°ä¸€é”®å®‰è£…&#x2F;æ›´æ–°&#x2F;å¸è½½ç­‰å¿«æ·æ“ä½œã€‚åŒ…æ‹¬ <code>docker é•œåƒ</code>ã€<code>æ¡Œé¢è½¯ä»¶</code>ã€<code>åº”ç”¨æœåŠ¡</code> ç­‰ã€‚è¯¦è§æ›´å¤š<a target="_blank" rel="noopener" href="https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/build-armbian/documents/armbian_software.md">è¯´æ˜</a>ã€‚</p>
<h3 id="ä¿®æ”¹-Armbian-é…ç½®"><a href="#ä¿®æ”¹-Armbian-é…ç½®" class="headerlink" title="ä¿®æ”¹ Armbian é…ç½®"></a>ä¿®æ”¹ Armbian é…ç½®</h3><p>ç™»å½• Armbian ç³»ç»Ÿ â†’ è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">armbian-config</span><br></pre></td></tr></table></figure>

<h3 id="ä¸º-Armbian-åˆ›å»º-swap"><a href="#ä¸º-Armbian-åˆ›å»º-swap" class="headerlink" title="ä¸º Armbian åˆ›å»º swap"></a>ä¸º Armbian åˆ›å»º swap</h3><p>å¦‚æœä½ åœ¨ä½¿ç”¨ <code>docker</code> ç­‰å†…å­˜å ç”¨è¾ƒå¤§çš„åº”ç”¨æ—¶ï¼Œè§‰å¾—å½“å‰ç›’å­çš„å†…å­˜ä¸å¤Ÿä½¿ç”¨ï¼Œå¯ä»¥åˆ›å»º <code>swap</code> è™šæ‹Ÿå†…å­˜åˆ†åŒºï¼Œå°†ç£ç›˜ç©ºé—´çš„ä¸€å®šå®¹é‡è™šæ‹Ÿæˆå†…å­˜æ¥ä½¿ç”¨ã€‚ä¸‹é¢å‘½ä»¤è¾“å…¥å‚æ•°çš„å•ä½æ˜¯ <code>GB</code>ï¼Œé»˜è®¤ä¸º <code>1</code>ã€‚</p>
<p>ç™»å½• Armbian ç³»ç»Ÿ â†’ è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">armbian</span>-swap <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="å¤‡ä»½-è¿˜åŸ-EMMC-åŸç³»ç»Ÿ"><a href="#å¤‡ä»½-è¿˜åŸ-EMMC-åŸç³»ç»Ÿ" class="headerlink" title="å¤‡ä»½&#x2F;è¿˜åŸ EMMC åŸç³»ç»Ÿ"></a>å¤‡ä»½&#x2F;è¿˜åŸ EMMC åŸç³»ç»Ÿ</h3><p>æ”¯æŒåœ¨ <code>TF/SD/USB</code> ä¸­å¯¹ç›’å­çš„ <code>EMMC</code> åˆ†åŒºè¿›è¡Œå¤‡ä»½&#x2F;æ¢å¤ã€‚å»ºè®®æ‚¨åœ¨å…¨æ–°çš„ç›’å­é‡Œå®‰è£… Armbian ç³»ç»Ÿå‰ï¼Œå…ˆå¯¹å½“å‰ç›’å­è‡ªå¸¦çš„å®‰å“ TV ç³»ç»Ÿè¿›è¡Œå¤‡ä»½ï¼Œä»¥ä¾¿æ—¥ååœ¨æ¢å¤ç”µè§†ç³»ç»Ÿç­‰æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p>
<p>è¯·ä» <code>TF/SD/USB</code> å¯åŠ¨ Armbian ç³»ç»Ÿ â†’ è¾“å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">armbian-ddbr</span></span><br></pre></td></tr></table></figure>

<p>è¯¦æƒ…è®¿é—®github</p>
<h3 id="æ¸…åæº-etc-apt-sources-list"><a href="#æ¸…åæº-etc-apt-sources-list" class="headerlink" title="æ¸…åæº &#x2F;etc&#x2F;apt&#x2F;sources.list"></a>æ¸…åæº &#x2F;etc&#x2F;apt&#x2F;sources.list</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free</span><br></pre></td></tr></table></figure>

<h2 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h2><p>apt install docker.io</p>
<h3 id="å®‰è£…dockerç®¡ç†é¢æ¿"><a href="#å®‰è£…dockerç®¡ç†é¢æ¿" class="headerlink" title="å®‰è£…dockerç®¡ç†é¢æ¿"></a>å®‰è£…dockerç®¡ç†é¢æ¿</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create portainer_data</span><br></pre></td></tr></table></figure>

<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p <span class="number">8000</span>:<span class="number">8000</span> -p <span class="number">9000</span>:<span class="number">9000</span> --name=portainer --restart=always -v <span class="regexp">/var/</span>run<span class="regexp">/docker.sock:/</span>var<span class="regexp">/run/</span>docker.sock -v portainer_data:<span class="regexp">/data portainer/</span>portainer:linux-arm64</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…dockerç‰ˆopenwrt"><a href="#å®‰è£…dockerç‰ˆopenwrt" class="headerlink" title="å®‰è£…dockerç‰ˆopenwrt"></a>å®‰è£…dockerç‰ˆopenwrt</h3><p><a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-958173-1-1.html">Få¤§æ•™ç¨‹</a></p>
<p>å¼€å¯ç½‘å¡çš„æ··æ‚æ¨¡å¼ï¼ˆè¿™æ ·æ˜¯ä¸ºäº†ç›®å‰è¿™ä¸ªé˜¶æ®µèƒ½æ­£å¸¸å®‰è£…å¹¶é…ç½®ï¼Œè¦æ°¸ä¹…å¼€å¯éœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œç¨åè¯¦è¿°ï¼‰</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="keyword">link</span> <span class="built_in">set</span> eth0 promisc <span class="keyword">on</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºdockerçš„è™šæ‹Ÿç½‘ç»œï¼ˆå¯ç”¨docker network lsæŸ¥çœ‹å·²åˆ›å»ºäº†å“ªäº›ï¼‰</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker<span class="built_in"> network </span>create -d macvlan <span class="attribute">--subnet</span>=192.168.1.0/24 <span class="attribute">--gateway</span>=192.168.1.1 -o <span class="attribute">parent</span>=eth0 macnet</span><br></pre></td></tr></table></figure>

<p>æ‹‰å–é•œåƒ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull unifreq/openwrt-aarch64:latest</span><br><span class="line">docker run --name=openwrt --restart always -d --network macnet --privileged unifreq/openwrt-aarch64:latest /sbin/init</span><br></pre></td></tr></table></figure>

<h3 id="å…¶ä»–äº‹é¡¹"><a href="#å…¶ä»–äº‹é¡¹" class="headerlink" title="å…¶ä»–äº‹é¡¹"></a>å…¶ä»–äº‹é¡¹</h3><p>å¦‚æ­¤è®¾ç½®åï¼Œä¼šå­˜åœ¨å¦‚ä¸‹é—®é¢˜ï¼š</p>
<p>åŒç½‘æ®µè®¾å¤‡å‡å¯ä»¥æ­£å¸¸è®¿é—®ï¼ˆåŒ…æ‹¬pingï¼‰N1å’Œopï¼Œä½†N1å’Œopä¹‹é—´æ˜¯ä¸èƒ½äº’è®¿çš„ã€éœ€è¦å°†armbiançš„ipè®¾ç½®ä¸ºé™æ€çš„æ‰è¡Œã€‘</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>config/network</span><br></pre></td></tr></table></figure>


<p>è®¾ç½®openwrtçš„é™æ€åœ°å€</p>
<p>N1é‡å¯ç½‘å¡æ··æ‚æ¨¡å¼ä¼šå¤±æ•ˆï¼Œéœ€è®¾ä¸ºæ°¸ä¹…å¼€å¯</p>
<p>è§£å†³æ–¹æ¡ˆæ˜¯ä¿®æ”¹&#x2F;etc&#x2F;network&#x2F;interfacesæ–‡ä»¶ï¼šï¼ˆè°¨æ…æ“ä½œï¼Œå¯èƒ½å¯¼è‡´armbianæ°¸è¿œæ— ç½‘ç»œï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">auto eth0</span><br><span class="line">iface eth0 inet manual</span><br><span class="line">up ip <span class="built_in">link</span> <span class="built_in">set</span> eth0 promisc on</span><br><span class="line">auto macvlan</span><br><span class="line">iface macvlan inet static</span><br><span class="line">  address 192.168.12.104â†’ä¿®æ”¹æˆä½ éœ€è¦çš„</span><br><span class="line">  netmask 255.255.255.0</span><br><span class="line">  gateway 192.168.12.1â†’éœ€æ”¹æˆä½ çš„ä¸»è·¯ç”±ipæˆ–192.168.12.5ï¼ˆæ—è·¯ç”±çš„ipï¼‰</span><br><span class="line">  dns-nameservers 192.168.12.1â†’éœ€æ”¹æˆä½ çš„ä¸»è·¯ç”±ipæˆ–12.5æˆ–å†åŠ 1ä¸ªå…¬å…±dnsæ¯”å¦‚114</span><br><span class="line">  pre-up ip <span class="built_in">link</span> add macvlan <span class="built_in">link</span> eth0 <span class="built_in">type</span> macvlan mode bridge</span><br><span class="line">  post-down ip <span class="built_in">link</span> del macvlan <span class="built_in">link</span> eth0 <span class="built_in">type</span> macvlan mode bridge</span><br></pre></td></tr></table></figure>

<p>æ²¡æœ‰ç½‘çš„åŸå› æ˜¯æ²¡æœ‰æ·»åŠ dnsæœåŠ¡</p>
<h2 id="å®‰è£…dockerç‰ˆclash"><a href="#å®‰è£…dockerç‰ˆclash" class="headerlink" title="å®‰è£…dockerç‰ˆclash"></a>å®‰è£…dockerç‰ˆclash</h2><p>Clashåœ¨Dockerä¸­çš„éƒ¨ç½²</p>
<p>éƒ¨ç½²å¯è§†åŒ–clash dashboardå®¹å™¨</p>
<p>é¦–å…ˆå°†dashboardçš„image pullä¸‹æ¥ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull haishanh/yacd</span><br></pre></td></tr></table></figure>

<h4 id="ç„¶åç›´æ¥è·‘èµ·æ¥å°±è¡Œï¼Œæ³¨æ„æ˜ å°„ä¸€ä¸ªæ²¡åœ¨ä½¿ç”¨çš„ç«¯å£å°±è¡Œ"><a href="#ç„¶åç›´æ¥è·‘èµ·æ¥å°±è¡Œï¼Œæ³¨æ„æ˜ å°„ä¸€ä¸ªæ²¡åœ¨ä½¿ç”¨çš„ç«¯å£å°±è¡Œ" class="headerlink" title="ç„¶åç›´æ¥è·‘èµ·æ¥å°±è¡Œï¼Œæ³¨æ„æ˜ å°„ä¸€ä¸ªæ²¡åœ¨ä½¿ç”¨çš„ç«¯å£å°±è¡Œ"></a>ç„¶åç›´æ¥è·‘èµ·æ¥å°±è¡Œï¼Œæ³¨æ„æ˜ å°„ä¸€ä¸ªæ²¡åœ¨ä½¿ç”¨çš„ç«¯å£å°±è¡Œ</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 1234:80 -d haishanh/yacd</span><br></pre></td></tr></table></figure>

<h4 id="åœ¨æµè§ˆå™¨é”®å…¥æœåŠ¡å™¨åœ°å€è·Ÿç«¯å£å·ï¼Œæˆ‘è¿™é‡Œæ˜¯è¾“å…¥192-168-199-10-1234ï¼Œå°±å¯ä»¥æ‰“å¼€dashboardé¡µé¢"><a href="#åœ¨æµè§ˆå™¨é”®å…¥æœåŠ¡å™¨åœ°å€è·Ÿç«¯å£å·ï¼Œæˆ‘è¿™é‡Œæ˜¯è¾“å…¥192-168-199-10-1234ï¼Œå°±å¯ä»¥æ‰“å¼€dashboardé¡µé¢" class="headerlink" title="åœ¨æµè§ˆå™¨é”®å…¥æœåŠ¡å™¨åœ°å€è·Ÿç«¯å£å·ï¼Œæˆ‘è¿™é‡Œæ˜¯è¾“å…¥192.168.199.10:1234ï¼Œå°±å¯ä»¥æ‰“å¼€dashboardé¡µé¢"></a>åœ¨æµè§ˆå™¨é”®å…¥æœåŠ¡å™¨åœ°å€è·Ÿç«¯å£å·ï¼Œæˆ‘è¿™é‡Œæ˜¯è¾“å…¥192.168.199.10:1234ï¼Œå°±å¯ä»¥æ‰“å¼€dashboardé¡µé¢</h4><h2 id="éƒ¨ç½²clashå®¹å™¨"><a href="#éƒ¨ç½²clashå®¹å™¨" class="headerlink" title="éƒ¨ç½²clashå®¹å™¨"></a>éƒ¨ç½²clashå®¹å™¨</h2><p>å‡†å¤‡å¥½ä½ çš„é…ç½®æ–‡ä»¶config.yamlï¼ŒèŠ‚ç‚¹å’Œè®¢é˜…å¾—è‡ªå·±æƒ³åŠæ³•!</p>
<p>å°†ä¸‹è¾¹çš„ä»£ç è¦†ç›–å…¥ä½ åŸæœ‰çš„åŸºç¡€é…ç½®</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">port:</span> <span class="number">7890</span></span><br><span class="line"><span class="attr">socks-port:</span> <span class="number">7891</span></span><br><span class="line"><span class="comment">#è½¬å‘ç«¯å£ä¸€å®šè¦é…ç½®</span></span><br><span class="line"><span class="attr">redir-port:</span> <span class="number">7892</span></span><br><span class="line"><span class="comment">#å…è®¸æ¥ç®¡å±€åŸŸç½‘æµé‡</span></span><br><span class="line"><span class="attr">allow-lan:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#é»˜è®¤ä»£ç†æ¨¡å¼</span></span><br><span class="line"><span class="attr">mode:</span> <span class="string">Rule</span></span><br><span class="line"><span class="attr">log-level:</span> <span class="string">warning</span></span><br><span class="line"><span class="comment">#æ¥å£æ§åˆ¶ç«¯å£ä½ å¯ä»¥è‡ªå·±è®¾ç½®ï¼Œé»˜è®¤æ˜¯9090</span></span><br><span class="line"><span class="attr">external-controller:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">:7070</span></span><br><span class="line"><span class="comment">#å¦‚æœæœåŠ¡å™¨å¯¹å…¬ç½‘å¼€æ”¾å¯ä»¥è®¾ç½®å¯†ç </span></span><br><span class="line"><span class="attr">secret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment">#external-ui: dashboard</span></span><br><span class="line"><span class="comment">#é…ç½®ç”±clashæ¥ç®¡çš„dnsè§£æ</span></span><br><span class="line"><span class="attr">dns:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#ä¸»è¦ç›‘å¬å®šå‘è½¬å‘æ¥çš„æ•°æ®ï¼Œåç»­ä¼šåœ¨è·¯ç”±è¡¨é‡Œé…ç½®è½¬å‘ç«¯å£ä¸º1053</span></span><br><span class="line">  <span class="attr">listen:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">:1053</span></span><br><span class="line">  <span class="attr">enhanced-mode:</span> <span class="string">redir-host</span></span><br><span class="line"><span class="comment">#è§ä¸‹æ–¹é“¾æ¥</span></span><br><span class="line">  <span class="attr">nameserver:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;114.114.114.114&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;223.5.5.5&#x27;</span></span><br><span class="line">  <span class="attr">fallback:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;tls://1.1.1.1:853&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;tcp://1.1.1.1:53&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;tcp://208.67.222.222:443&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;tls://dns.google&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å‡†å¤‡å¥½é…ç½®æ–‡ä»¶ä¹‹å ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨clashå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name Clash -d -v /opt/docker/clash/config.yaml:/root/.config/clash/config.yaml --network macnet --ip 192.168.1.100 --cap-add=NET_ADMIN --privileged dreamacro/clash</span><br></pre></td></tr></table></figure>

</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/armbian/" rel="tag">armbian</a></li></ul></div><div class="post-nav"><a class="pre" href="/2023/07/24/git%E7%9A%84%E4%BD%BF%E7%94%A8/">gitçš„ä½¿ç”¨</a><a class="next" href="/2023/07/09/WinRAR%E6%B7%B1%E5%BA%A6%E5%8E%BB%E9%99%A4%E5%BC%B9%E7%AA%97%E5%B9%BF%E5%91%8A/">WinRARæ·±åº¦å»é™¤å¼¹çª—å¹¿å‘Š</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="å…³äº"><img class="nofancybox" src="/img/avatar.png"/></a><p>ç„šé¦™</p><a class="info-icon" href="https://gpt.uiuuyr.top" title="chatgpt" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/ffxdpie" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/N1%E7%9B%92%E5%AD%90/">N1ç›’å­</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%99%E7%A8%8B/">æ•™ç¨‹</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%B8%E6%88%8F/">æ¸¸æˆ</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A7%86%E9%A2%91/">è§†é¢‘</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6/">è¯»ä¹¦</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86/">é—®é¢˜å¤„ç†</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/openwrt/" style="font-size: 15px;">openwrt</a> <a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 15px;">æ•™ç¨‹</a> <a href="/tags/WinRAR/" style="font-size: 15px;">WinRAR</a> <a href="/tags/ASF/" style="font-size: 15px;">ASF</a> <a href="/tags/FFmpeg/" style="font-size: 15px;">FFmpeg</a> <a href="/tags/git%E7%9A%84%E4%BD%BF%E7%94%A8/" style="font-size: 15px;">gitçš„ä½¿ç”¨</a> <a href="/tags/armbian/" style="font-size: 15px;">armbian</a> <a href="/tags/wrap/" style="font-size: 15px;">wrap</a> <a href="/tags/steam/" style="font-size: 15px;">steam</a> <a href="/tags/windows/" style="font-size: 15px;">windows</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 15px;">æµ‹è¯•</a> <a href="/tags/vpn/" style="font-size: 15px;">vpn</a> <a href="/tags/%E8%AE%B0%E5%BD%95/" style="font-size: 15px;">è®°å½•</a> <a href="/tags/%E9%97%AE%E9%A2%98/" style="font-size: 15px;">é—®é¢˜</a> <a href="/tags/%E9%93%BE%E6%8E%A5/" style="font-size: 15px;">é“¾æ¥</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2024/01/13/mklink%E7%9A%84%E4%BD%BF%E7%94%A8/">mklinkçš„ä½¿ç”¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/12/16/%E8%A7%A3%E5%86%B3%E4%B8%80%E4%B8%AAWindows%E4%B8%8B%E5%90%AF%E5%8A%A8%E9%A1%B9%E9%87%8D%E5%A4%8D%E7%9A%84%E9%97%AE%E9%A2%98/">è§£å†³ä¸€ä¸ªWindowsä¸‹å¯åŠ¨é¡¹é‡å¤çš„é—®é¢˜</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/10/22/OpenWrt%E7%9A%84%E7%BC%96%E8%AF%91%E5%92%8C%E4%BD%BF%E7%94%A8/">OpenWrtçš„ç¼–è¯‘å’Œä½¿ç”¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/09/25/%E5%B7%AB%E5%B8%88%E4%B8%89/">å·«å¸ˆä¸‰</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/09/24/docker%E7%9B%B8%E5%85%B3%E5%B8%AE%E5%8A%A9/">dockerç›¸å…³å¸®åŠ©</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/09/09/PyQt5%E7%9A%84%E5%9B%BA%E5%AE%9A%E5%86%99%E6%B3%95/">PyQt5çš„å›ºå®šå†™æ³•</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/08/13/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B2%A1%E7%94%A8%E6%89%80%E9%9C%80%E7%89%B9%E6%9D%83%E7%9A%84%E5%A4%84%E7%90%86/">å®¢æˆ·ç«¯æ²¡ç”¨æ‰€éœ€ç‰¹æƒçš„å¤„ç†</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/08/07/%E8%AF%BB%E4%B9%A6%E8%AE%B0%E5%BD%95/">è¯»ä¹¦è®°å½•</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/08/01/ffmpeg%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/">ffmpegçš„ä½¿ç”¨æ–¹æ³•</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/07/30/%E5%8F%8C%E5%BC%80steam%E5%8F%8A%E5%85%B6%E6%B8%B8%E6%88%8F/">åŒå¼€steamåŠå…¶æ¸¸æˆ</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="https://youtube.com" title="google" target="_blank">google</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2024 <a href="/." rel="nofollow">ç„šé¦™çš„å°ç«™.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" color="0,0,0" opacity="0.5" zIndex="-2" count="50" src="//lib.baomitu.com/canvas-nest.js/latest/canvas-nest.js"></script><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>