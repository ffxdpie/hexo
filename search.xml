<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    
    
    
    
    
    
    <entry>
      <title>解决一个Windows下启动项重复的问题</title>
      <link href="/2023/12/16/%E8%A7%A3%E5%86%B3%E4%B8%80%E4%B8%AAWindows%E4%B8%8B%E5%90%AF%E5%8A%A8%E9%A1%B9%E9%87%8D%E5%A4%8D%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2023/12/16/%E8%A7%A3%E5%86%B3%E4%B8%80%E4%B8%AAWindows%E4%B8%8B%E5%90%AF%E5%8A%A8%E9%A1%B9%E9%87%8D%E5%A4%8D%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="解决一个Windows下启动项重复的问题"><a href="#解决一个Windows下启动项重复的问题" class="headerlink" title="解决一个Windows下启动项重复的问题"></a>解决一个Windows下启动项重复的问题</h1><p>​    我喜欢Windows在运行的时候，任务管理器出现在右下的系统托盘里，便于监视系统的运行情况。为了能够开机自动运行任务管理器，我在”开始菜单”–&gt;“程序”–&gt;“启动”项中增加了指向任务管理器(taskmgr.exe)的快捷方式。这时问题出现了，当我开机的时候，taskmgr.exe会运行两次。</p><p>​    运行Windows自动的工具msconfig，发现startup栏中有两条taskmgr记录：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">taskmgr   C:<span class="string">\WINDOWS\System32\taskmgr.exe</span>   Common Startup</span><br><span class="line">taskmgr   C:<span class="string">\WINDOWS\System32\taskmgr.exe</span>   Startup</span><br></pre></td></tr></table></figure><p>​    为什么会出现Common Startup和Startup这两条记录呢？通过搜索互联网，我找到 <a href="https://mail.google.com/mail/u/0/#label/Study%2FComputer/131f97e61fa83fc0">参考资料一</a>。这篇文件详细介绍了msconfig中的这些startup记录是如何来的，自然也讲到了Common Startup和Startup的由来：（假设我登录Windows的用户名是tom）</p><p>​    1. Common Startup对应C:\Documents and Settings\ All Users\Start Menu\Programs\Startup目录下的项；</p><p>​    2. Startup对应C:\Documents and Settings\tom\Start Menu\Programs\Startup目录下的项。</p><p>​    文章还给出了一种验证的方法：右击“开始菜单”–&gt;“程序”–&gt;“启动”，在弹出的上下文菜单中，单击最上面的“打开”项，出来的目录是对应Startup项的；如果单击第二项“打开所有用户”，出来的目录是对应Common Startup项的。奇怪的是，我按照这种验证方法，出来目录的全都是指向All Users，没有指向tom这个用户的，这也是taskmgr.exe会运行两次的根本原因。</p><p>​    继续上网查找，找到了 <a href="http://topic.csdn.net/u/20101219/08/3068cb0f-4fae-4922-9bcf-cdeebf537037.html">参考资料二</a>，里面的大牛指出了上述行为是受注册表控制的。我打开我的注册表，看到了下面两条：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[HKEY_CURRENT_USER<span class="string">\Software\Microsoft\Windows\CurrentVersion\Explorer\</span> Shell Folders]</span><br><span class="line">        Start Menu = C:<span class="string">\Documents</span> <span class="keyword">and</span> Settings<span class="string">\All</span> Users<span class="string">\Start</span> Menu</span><br><span class="line">        Startup = C:<span class="string">\Documents</span> <span class="keyword">and</span> Settings<span class="string">\All</span> Users<span class="string">\Start</span> Menu<span class="string">\Programs\Startup</span></span><br><span class="line">[HKEY_CURRENT_USER<span class="string">\Software\Microsoft\Windows\CurrentVersion\Explorer\</span> User Shell Folders]</span><br><span class="line">        Start Menu = %ALLUSERSPROFILE%<span class="string">\Start</span> Menu</span><br><span class="line">        Startup = %ALLUSERSPROFILE%<span class="string">\Start</span> Menu<span class="string">\Programs\Startup</span></span><br></pre></td></tr></table></figure><p>​    很明显，第一条Shell Folders对应的是Common Startup，第二User Shell Folders条对应的是Startup。因为%ALLUSERSPROFILE%等于C:\Documents and Settings\All Users，所以我系统里的Common Startup和Startup指向了同一目录。</p><p>​    到此为止，终于找到真凶了，原来是注册表乱了。解决办法很简单，将注册表指向正确的位置就可以了。</p><p>​    参考资料：<br>​        一、<a href="https://mail.google.com/mail/u/0/#label/Study%2FComputer/131f97e61fa83fc0">https://mail.google.com/mail/u/0/#label/Study%2FComputer/131f97e61fa83fc0</a><br>​       二、<a href="http://topic.csdn.net/u/20101219/08/3068cb0f-4fae-4922-9bcf-cdeebf537037.html">http://topic.csdn.net/u/20101219/08/3068cb0f-4fae-4922-9bcf-cdeebf537037.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 问题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenWrt的编译和使用</title>
      <link href="/2023/10/22/OpenWrt%E7%9A%84%E7%BC%96%E8%AF%91%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/10/22/OpenWrt%E7%9A%84%E7%BC%96%E8%AF%91%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="OpenWrt的编译和使用"><a href="#OpenWrt的编译和使用" class="headerlink" title="OpenWrt的编译和使用"></a>OpenWrt的编译和使用</h1><p>lede仓库源码和教程    <a href="https://github.com/coolsnowwolf/lede">OpenWrt的编译和使用</a></p><p>Flippy 的 Openwrt 打包源码 <a href="https://github.com/unifreq/openwrt_packit">Flippy 的 Openwrt 打包源码</a></p><p>passwall仓库 <a href="https://github.com/kenzok8/small">kenzok8</a></p><p>仓库 里面有armbian和openwrt以及内核 <a href="https://github.com/ophub">ophub</a> </p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ol><li><p><strong>不要用 root 用户进行编译</strong></p></li><li><p><strong>国内用户编译前最好准备好梯子</strong></p></li><li><p><strong>默认登陆IP 192.168.1.99 密码 password</strong></p></li></ol><h2 id="编译命令"><a href="#编译命令" class="headerlink" title="编译命令"></a>编译命令</h2><ol><li><h6 id="首先装好-Linux-系统，推荐-Debian-11-或-Ubuntu-LTS"><a href="#首先装好-Linux-系统，推荐-Debian-11-或-Ubuntu-LTS" class="headerlink" title="首先装好 Linux 系统，推荐 Debian 11 或 Ubuntu LTS"></a>首先装好 Linux 系统，推荐 Debian 11 或 Ubuntu LTS</h6></li><li><h6 id="安装编译依赖"><a href="#安装编译依赖" class="headerlink" title="安装编译依赖"></a>安装编译依赖</h6><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update -y</span><br><span class="line">sudo apt full-upgrade -y</span><br><span class="line">sudo apt <span class="keyword">install </span>-y ack antlr3 asciidoc autoconf automake autopoint <span class="keyword">binutils </span><span class="keyword">bison </span><span class="keyword">build-essential </span>\</span><br><span class="line"><span class="keyword">bzip2 </span>ccache cmake cpio curl device-tree-compiler fastjar flex gawk gettext gcc-<span class="keyword">multilib </span>g++-<span class="keyword">multilib </span>\</span><br><span class="line">git gperf haveged help2man intltool libc6-dev-i386 libelf-dev libglib2.<span class="number">0</span>-dev libgmp3-dev libltdl-dev \</span><br><span class="line">libmpc-dev libmpfr-dev libncurses5-dev libncursesw5-dev libreadline-dev libssl-dev libtool lrzsz \</span><br><span class="line">mkisofs msmtp nano ninja-<span class="keyword">build </span>p7zip p7zip-full patch pkgconf python2.<span class="number">7</span> python3 python3-pyelftools \</span><br><span class="line">libpython3-dev qemu-utils rsync <span class="keyword">scons </span>squashfs-tools <span class="keyword">subversion </span><span class="keyword">swig </span>texinfo uglifyjs upx-ucl unzip \</span><br><span class="line">vim wget xmlto xxd zlib1g-dev python3-setuptools</span><br></pre></td></tr></table></figure></li><li><h6 id="下载源代码，更新-feeds-并选择配置"><a href="#下载源代码，更新-feeds-并选择配置" class="headerlink" title="下载源代码，更新 feeds 并选择配置"></a>下载源代码，更新 feeds 并选择配置</h6><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/coolsnowwolf/</span>lede</span><br><span class="line">cd lede</span><br><span class="line">.<span class="regexp">/scripts/</span>feeds update -a</span><br><span class="line">.<span class="regexp">/scripts/</span>feeds install -a</span><br><span class="line">make menuconfig</span><br></pre></td></tr></table></figure></li><li><h6 id="下载-dl-库，编译固件-（-j-后面是线程数，第一次编译推荐用单线程）"><a href="#下载-dl-库，编译固件-（-j-后面是线程数，第一次编译推荐用单线程）" class="headerlink" title="下载 dl 库，编译固件 （-j 后面是线程数，第一次编译推荐用单线程）"></a>下载 dl 库，编译固件 （-j 后面是线程数，第一次编译推荐用单线程）</h6><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span> download -j8</span><br><span class="line"><span class="built_in">make</span> V=s -j1</span><br></pre></td></tr></table></figure></li></ol><p>本套代码保证肯定可以编译成功。里面包括了 R23 所有源代码，包括 IPK 的。</p><p>你可以自由使用，但源码编译二次发布请注明我的 GitHub 仓库链接。谢谢合作！</p><h2 id="二次编译："><a href="#二次编译：" class="headerlink" title="二次编译："></a>二次编译：</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> lede</span><br><span class="line">git pull</span><br><span class="line">./scripts/feeds <span class="keyword">update</span> -<span class="keyword">a</span></span><br><span class="line">./scripts/feeds install -<span class="keyword">a</span></span><br><span class="line"><span class="keyword">make</span> defconfig</span><br><span class="line"><span class="keyword">make</span> download -j8</span><br><span class="line"><span class="keyword">make</span> V=s -<span class="keyword">j</span>$(nproc)</span><br></pre></td></tr></table></figure><p>如果需要重新配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf ./tmp &amp;&amp; <span class="built_in">rm</span> -rf .config</span><br><span class="line">make menuconfig</span><br><span class="line">make V=s -j$(<span class="built_in">nproc</span>)</span><br></pre></td></tr></table></figure><p>编译完成后输出路径：  bin&#x2F;targets</p><h2 id="固件使用说明："><a href="#固件使用说明：" class="headerlink" title="固件使用说明："></a>固件使用说明：</h2><p>默认IP： 192.168.1.1  默认密码： password<br>注：如果用这个固件做旁路由的话不要忘了加自定义防火墙规则（网络-&gt;防火墙-&gt;自定义规则）：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -<span class="selector-tag">I</span> POSTROUTING -o eth0 -j MASQUERADE</span><br></pre></td></tr></table></figure><p>也可以尝试（有桥接存在的情况下）</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -I POSTROUTING -o <span class="keyword">br-lan </span>-<span class="keyword">j </span>MASQUERADE </span><br></pre></td></tr></table></figure><p>AdguardHome: 固件里不包含，可以用docker方式安装, 可以双开甚至多开，灵活性很强，升级也不依赖于固件，直接用docker命令升级。</p><h4 id="small仓库的使用"><a href="#small仓库的使用" class="headerlink" title="small仓库的使用"></a>small仓库的使用</h4><p>一键命令</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sed -<span class="selector-tag">i</span> <span class="string">&#x27;$a src-git kenzo https://github.com/kenzok8/openwrt-packages&#x27;</span> feeds<span class="selector-class">.conf</span><span class="selector-class">.default</span></span><br><span class="line">sed -<span class="selector-tag">i</span> <span class="string">&#x27;$a src-git small https://github.com/kenzok8/small&#x27;</span> feeds<span class="selector-class">.conf</span><span class="selector-class">.default</span></span><br><span class="line">git pull</span><br><span class="line">./scripts/feeds update -<span class="selector-tag">a</span></span><br><span class="line">./scripts/feeds install -<span class="selector-tag">a</span></span><br><span class="line">make menuconfig</span><br></pre></td></tr></table></figure><p><strong>注意</strong></p><p>编译新版Sing-box和hysteria，需golang版本1.20或者以上版本 ，可以用以下命令</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pushd feeds<span class="regexp">/packages/</span>lang</span><br><span class="line">rm -rf golang &amp;&amp; svn co https:<span class="regexp">//gi</span>thub.com<span class="regexp">/openwrt/</span>packages<span class="regexp">/branches/</span>openwrt-<span class="number">23.05</span><span class="regexp">/lang/g</span>olang</span><br><span class="line">popd</span><br></pre></td></tr></table></figure><h3 id="smartdns使用教程"><a href="#smartdns使用教程" class="headerlink" title="smartdns使用教程"></a><a href="https://github.com/luckyyyyy/blog/issues/57">smartdns</a>使用教程</h3><p>smartdns 部分直接 vim 编辑 &#x2F;etc&#x2F;config&#x2F;smartdns 照抄即可，无需手动设置，配置完记得界面上点击保存应用，或者uci命令刷新配置，我里面有杭州电信的DNS服务器，不是杭州的记得自己改掉，否则可能有负面效果。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">config smartdns</span><br><span class="line">option server_name <span class="string">&#x27;smartdns&#x27;</span></span><br><span class="line">option<span class="built_in"> port </span><span class="string">&#x27;6053&#x27;</span></span><br><span class="line">option tcp_server <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option seconddns_tcp_server <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option coredump <span class="string">&#x27;0&#x27;</span></span><br><span class="line">option seconddns_server_group <span class="string">&#x27;passwall&#x27;</span></span><br><span class="line">option seconddns_no_speed_check <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option seconddns_no_dualstack_selection <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option prefetch_domain <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option ipv6_server <span class="string">&#x27;0&#x27;</span></span><br><span class="line">option force_aaaa_soa <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option dualstack_ip_selection <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option serve_expired <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option redirect <span class="string">&#x27;dnsmasq-upstream&#x27;</span></span><br><span class="line">option rr_ttl_min <span class="string">&#x27;300&#x27;</span></span><br><span class="line">option seconddns_port <span class="string">&#x27;7913&#x27;</span></span><br><span class="line">option seconddns_enabled <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option seconddns_no_rule_nameserver <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option seconddns_no_rule_addr <span class="string">&#x27;0&#x27;</span></span><br><span class="line">option seconddns_no_rule_soa <span class="string">&#x27;0&#x27;</span></span><br><span class="line">option seconddns_no_rule_ipset <span class="string">&#x27;0&#x27;</span></span><br><span class="line">option cache_size <span class="string">&#x27;300&#x27;</span></span><br><span class="line">option seconddns_no_cache <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option enabled <span class="string">&#x27;1&#x27;</span></span><br><span class="line">list old_redirect <span class="string">&#x27;dnsmasq-upstream&#x27;</span></span><br><span class="line">list old_port <span class="string">&#x27;6053&#x27;</span></span><br><span class="line">list old_enabled <span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">config server</span></span><br><span class="line"><span class="built_in"></span>option name <span class="string">&#x27;aliyun&#x27;</span></span><br><span class="line">option<span class="built_in"> ip </span><span class="string">&#x27;223.5.5.5&#x27;</span></span><br><span class="line">option<span class="built_in"> port </span><span class="string">&#x27;53&#x27;</span></span><br><span class="line">option<span class="built_in"> type </span><span class="string">&#x27;udp&#x27;</span></span><br><span class="line">option blacklist_ip <span class="string">&#x27;0&#x27;</span></span><br><span class="line">option server_group <span class="string">&#x27;cn&#x27;</span></span><br><span class="line">option enabled <span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">config server</span></span><br><span class="line"><span class="built_in"></span>option name <span class="string">&#x27;114&#x27;</span></span><br><span class="line">option<span class="built_in"> ip </span><span class="string">&#x27;114.114.114.114&#x27;</span></span><br><span class="line">option<span class="built_in"> port </span><span class="string">&#x27;53&#x27;</span></span><br><span class="line">option<span class="built_in"> type </span><span class="string">&#x27;udp&#x27;</span></span><br><span class="line">option blacklist_ip <span class="string">&#x27;0&#x27;</span></span><br><span class="line">option server_group <span class="string">&#x27;cn&#x27;</span></span><br><span class="line">option enabled <span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">config server</span></span><br><span class="line"><span class="built_in"></span>option enabled <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option<span class="built_in"> type </span><span class="string">&#x27;udp&#x27;</span></span><br><span class="line">option name <span class="string">&#x27;电信&#x27;</span></span><br><span class="line">option<span class="built_in"> ip </span><span class="string">&#x27;202.101.172.35&#x27;</span></span><br><span class="line">option<span class="built_in"> port </span><span class="string">&#x27;53&#x27;</span></span><br><span class="line">option server_group <span class="string">&#x27;cn&#x27;</span></span><br><span class="line">option blacklist_ip <span class="string">&#x27;0&#x27;</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">config server</span></span><br><span class="line"><span class="built_in"></span>option enabled <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option<span class="built_in"> type </span><span class="string">&#x27;udp&#x27;</span></span><br><span class="line">option name <span class="string">&#x27;电信&#x27;</span></span><br><span class="line">option<span class="built_in"> ip </span><span class="string">&#x27;202.101.172.47&#x27;</span></span><br><span class="line">option<span class="built_in"> port </span><span class="string">&#x27;53&#x27;</span></span><br><span class="line">option server_group <span class="string">&#x27;cn&#x27;</span></span><br><span class="line">option blacklist_ip <span class="string">&#x27;0&#x27;</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">config server</span></span><br><span class="line"><span class="built_in"></span>option<span class="built_in"> type </span><span class="string">&#x27;udp&#x27;</span></span><br><span class="line">option<span class="built_in"> port </span><span class="string">&#x27;53&#x27;</span></span><br><span class="line">option name <span class="string">&#x27;DNSPod&#x27;</span></span><br><span class="line">option<span class="built_in"> ip </span><span class="string">&#x27;119.29.29.29&#x27;</span></span><br><span class="line">option blacklist_ip <span class="string">&#x27;0&#x27;</span></span><br><span class="line">option server_group <span class="string">&#x27;cn&#x27;</span></span><br><span class="line">option enabled <span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">config server</span></span><br><span class="line"><span class="built_in"></span>option enabled <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option name <span class="string">&#x27;cloud&#x27;</span></span><br><span class="line">option<span class="built_in"> ip </span><span class="string">&#x27;1.1.1.1&#x27;</span></span><br><span class="line">option<span class="built_in"> port </span><span class="string">&#x27;853&#x27;</span></span><br><span class="line">option<span class="built_in"> type </span><span class="string">&#x27;tls&#x27;</span></span><br><span class="line">option server_group <span class="string">&#x27;passwall&#x27;</span></span><br><span class="line">option blacklist_ip <span class="string">&#x27;0&#x27;</span></span><br><span class="line">option addition_arg <span class="string">&#x27; -exclude-default-group&#x27;</span></span><br><span class="line"><span class="built_in"></span></span><br><span class="line"><span class="built_in">config server</span></span><br><span class="line"><span class="built_in"></span>option enabled <span class="string">&#x27;1&#x27;</span></span><br><span class="line">option<span class="built_in"> type </span><span class="string">&#x27;udp&#x27;</span></span><br><span class="line">option name <span class="string">&#x27;CNNIC SDNS&#x27;</span></span><br><span class="line">option<span class="built_in"> ip </span><span class="string">&#x27;1.2.4.8&#x27;</span></span><br><span class="line">option<span class="built_in"> port </span><span class="string">&#x27;53&#x27;</span></span><br><span class="line">option server_group <span class="string">&#x27;cn&#x27;</span></span><br><span class="line">option blacklist_ip <span class="string">&#x27;0&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="如何验证？"><a href="#如何验证？" class="headerlink" title="如何验证？"></a>如何验证？</h2><p>登录路由器 使用 dig 或者 nslookup 检查下各端口的DNS以及分流情况</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nslookup www<span class="selector-class">.taobao</span><span class="selector-class">.com</span> <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">7913</span> 返回的是节点对应淘宝最快的IP</span><br><span class="line">nslookup www<span class="selector-class">.taobao</span><span class="selector-class">.com</span> <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6053</span> 返回的是国内最快的IP</span><br><span class="line">nslookup www<span class="selector-class">.taobao</span><span class="selector-class">.com</span> 应该是国内</span><br></pre></td></tr></table></figure><img src="dns.png" alt="dns" /><p>注：如果手动查询规则列表内的域名，使用端口6053，然后匹配规则，转发给7913，然后被缓存住。（国外因为跳过测速，所以多个域名是正确的）</p><img src="112566019_p1.jpg" alt="美女" /><img src="%E6%A0%97%E5%AD%90.jpg" style="zoom:33%;" /><img src="1698867079_new_111573410_p0-1699716220062-2.png" alt="米娘" /><img src="8EE2510132283BE410AB627FEB9A41E1.jpg" alt="风景" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> openwrt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>巫师三</title>
      <link href="/2023/09/25/%E5%B7%AB%E5%B8%88%E4%B8%89/"/>
      <url>/2023/09/25/%E5%B7%AB%E5%B8%88%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<h2 id="巫师三"><a href="#巫师三" class="headerlink" title="巫师三"></a>巫师三</h2><iframe src="https://store.steampowered.com/widget/292030/" frameborder="0" width="100%" height="190"></iframe><h2 id="巫师3存档消失"><a href="#巫师3存档消失" class="headerlink" title="巫师3存档消失"></a>巫师3存档消失</h2><p>1.打开Steam文件夹<br>2.找到userdata文件<br>3.在文件里面搜索gamesaves<br>4.找到日期为你最近存档时间的sav文件和png就是你的存档，复制几个最近的<br>5.打开文档找到The Witcher 3文件<br>6.打开gamesaves文件，粘贴进去复制好的文件</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    
    
    <entry>
      <title>PyQt5的固定写法</title>
      <link href="/2023/09/09/PyQt5%E7%9A%84%E5%9B%BA%E5%AE%9A%E5%86%99%E6%B3%95/"/>
      <url>/2023/09/09/PyQt5%E7%9A%84%E5%9B%BA%E5%AE%9A%E5%86%99%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#from PyQt5.Qt import *</span></span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QMainWindow, QMessageBox</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtCore</span><br><span class="line"><span class="keyword">from</span> C:\python file\wisdom\zhui.py <span class="keyword">import</span> Ui_MainWindow   <span class="comment">#替换成自己的</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Window</span>(<span class="title class_ inherited__">QMainWindow</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, parent=<span class="literal">None</span>, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(parent, *args, **kwargs)</span><br><span class="line">        self.ui = Ui_MainWindow()</span><br><span class="line">        self.ui.setupUi(self)</span><br><span class="line">        self.ui.pushButton.clicked.connect(self.login_button_clicked) <span class="comment">#将按钮与事件绑定</span></span><br><span class="line">        <span class="comment"># self.setWindowFlags(Qt.FramelessWindowHint)  #隐藏标题栏</span></span><br><span class="line">        <span class="comment"># self.setAttribute(Qt.WA_TranslucentBackground)  #隐藏多余背景</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login_button_clicked</span>(<span class="params">self</span>):                 <span class="comment">#事件</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 获取文本输入框中的账号、密码、最大值和最小值</span></span><br><span class="line">            username = self.ui.lineEdit.text()</span><br><span class="line">            password = self.ui.lineEdit_2.text()</span><br><span class="line">            max_1 = <span class="built_in">int</span>(self.ui.lineEdit_3.text())</span><br><span class="line">            min_1 = <span class="built_in">int</span>(self.ui.lineEdit_4.text())</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 在此进行输入的合法性验证</span></span><br><span class="line"></span><br><span class="line">            res = run(username, password, min_1, max_1)</span><br><span class="line">            self.ui.textBrowser.append(res)</span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="comment"># 处理类型转换错误</span></span><br><span class="line">            QMessageBox.warning(self, <span class="string">&quot;Error&quot;</span>, <span class="string">&quot;输入正确的值，最大值不能小于最小值&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="comment"># 处理其他异常</span></span><br><span class="line">            QMessageBox.warning(self, <span class="string">&quot;Error&quot;</span>, <span class="string">&quot;检查账户和网络: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(e)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    QtCore.QCoreApplication.setAttribute(QtCore.Qt.AA_EnableHighDpiScaling)</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    window = Window()</span><br><span class="line">    window.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>客户端没用所需特权的处理</title>
      <link href="/2023/08/13/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B2%A1%E7%94%A8%E6%89%80%E9%9C%80%E7%89%B9%E6%9D%83%E7%9A%84%E5%A4%84%E7%90%86/"/>
      <url>/2023/08/13/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B2%A1%E7%94%A8%E6%89%80%E9%9C%80%E7%89%B9%E6%9D%83%E7%9A%84%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="解决方法1"><a href="#解决方法1" class="headerlink" title="解决方法1"></a>解决方法1</h2><p>Windows 系统，开始-&gt;运行-&gt;cmd-&gt;</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">icacls C:\ /setintegritylevel M</span><br></pre></td></tr></table></figure><h2 id="解决方法2"><a href="#解决方法2" class="headerlink" title="解决方法2"></a>解决方法2</h2><p>Windows 系统</p><p>开始-&gt;运行-&gt;regedit-&gt;HKEY_LOCAL_MACHINE-&gt;SOFTWARE-&gt;Microsoft-&gt;Windows-&gt;CurrentVersion-&gt;Policies-&gt;System-&gt;EnableLUA</p><p>将其值修改为0-&gt;重启计算机。</p><p>如果你不想修改计算机的这些属性，可以在C盘中先创建一个文件夹，再将文件创建或复制到文件夹里也是可以的，但如果文件必须直接创建在C盘中，那就只能用这些方式修改计算机的属性了。</p>]]></content>
      
      
      <categories>
          
          <category> 问题处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>读书记录</title>
      <link href="/2023/08/07/%E8%AF%BB%E4%B9%A6%E8%AE%B0%E5%BD%95/"/>
      <url>/2023/08/07/%E8%AF%BB%E4%B9%A6%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<p>记录我从2023年8月7日以来读过的书籍</p><h3 id="《恶意》"><a href="#《恶意》" class="headerlink" title="《恶意》"></a>《恶意》</h3><h3 id="《希望只线》"><a href="#《希望只线》" class="headerlink" title="《希望只线》"></a>《希望只线》</h3><h3 id="《万历十五年》"><a href="#《万历十五年》" class="headerlink" title="《万历十五年》"></a>《万历十五年》</h3><h4 id="正在看《二十年目睹之怪现状》"><a href="#正在看《二十年目睹之怪现状》" class="headerlink" title="正在看《二十年目睹之怪现状》"></a>正在看《二十年目睹之怪现状》</h4><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 读书 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ffmpeg的使用方法</title>
      <link href="/2023/08/01/ffmpeg%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
      <url>/2023/08/01/ffmpeg%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="FFmpeg使用教程"><a href="#FFmpeg使用教程" class="headerlink" title="FFmpeg使用教程"></a>FFmpeg使用教程</h1><p>转载自<a href="https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html">阮一峰</a></p><p>FFmpeg 是视频处理最常用的开源软件。</p><p>它功能强大，用途广泛，大量用于视频网站和商业软件（比如 Youtube 和 iTunes），也是许多音频和视频格式的标准编码&#x2F;解码实现。<br>FFmpeg 本身是一个庞大的项目，包含许多组件和库文件，最常用的是它的命令行工具。本文介绍 FFmpeg 命令行如何处理视频，比桌面视频处理软件更简洁高效。</p><p>如果你还没安装，可以根据  <a href="https://www.ffmpeg.org/download.html">官方文档</a>  先完成安装。</p><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>介绍 FFmpeg 用法之前，需要了解一些视频处理的基本概念。</p><h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><p>视频文件本身其实是一个容器（container），里面包括了视频和音频，也可能有字幕等其他内容。</p><p>常见的容器格式有以下几种。一般来说，视频文件的后缀名反映了它的容器格式。</p><ul><li><p>MP4</p></li><li><p>MKV</p></li><li><p>WebM</p></li><li><p>AVI</p></li></ul><p> 下面的命令查看 FFmpeg 支持的容器。</p><p>$ ffmpeg -formats</p><h3 id="编码格式"><a href="#编码格式" class="headerlink" title="编码格式"></a>编码格式</h3><p>视频和音频都需要经过编码，才能保存成文件。不同的编码格式（CODEC），有不同的压缩率，会导致文件大小和清晰度的差异。</p><p>常用的视频编码格式如下。</p><ul><li>H.262</li><li>H.264</li><li>H.265</li></ul><p>上面的编码格式都是有版权的，但是可以免费使用。此外，还有几种无版权的视频编码格式。</p><ul><li>VP8</li><li>VP9</li><li>AV1</li></ul><p>常用的音频编码格式如下。</p><ul><li>MP3</li><li>AAC</li></ul><p>上面所有这些都是有损的编码格式，编码后会损失一些细节，以换取压缩后较小的文件体积。无损的编码格式压缩出来的文件体积较大，这里就不介绍了。</p><p>下面的命令可以查看 FFmpeg 支持的编码格式，视频编码和音频编码都在内。</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ffmpeg -codecs</span></span><br></pre></td></tr></table></figure><h3 id="编码器"><a href="#编码器" class="headerlink" title="编码器"></a>编码器</h3><p>编码器（encoders）是实现某种编码格式的库文件。只有安装了某种格式的编码器，才能实现该格式视频&#x2F;音频的编码和解码。</p><p>以下是一些 FFmpeg 内置的视频编码器。</p><ul><li>libx264：最流行的开源 H.264 编码器</li><li>NVENC：基于 NVIDIA GPU 的 H.264 编码器</li><li>libx265：开源的 HEVC 编码器</li><li>libvpx：谷歌的 VP8 和 VP9 编码器</li><li>libaom：AV1 编码器</li></ul><p>音频编码器如下。</p><ul><li>libfdk-aac</li><li>aac</li></ul><p>下面的命令可以查看 FFmpeg 已安装的编码器。</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ffmpeg -encoders</span></span><br></pre></td></tr></table></figure><h2 id="FFmpeg-的使用格式"><a href="#FFmpeg-的使用格式" class="headerlink" title="FFmpeg 的使用格式"></a>FFmpeg 的使用格式</h2><p>FFmpeg 的命令行参数非常多，可以分成五个部分。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg &#123;1&#125; &#123;2&#125; -i &#123;3&#125; &#123;4&#125; &#123;5&#125;</span><br></pre></td></tr></table></figure><p>上面命令中，五个部分的参数依次如下。</p><ol><li>全局参数</li><li>输入文件参数</li><li>输入文件</li><li>输出文件参数</li><li>输出文件</li></ol><p>参数太多的时候，为了便于查看，ffmpeg 命令可以写成多行。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg  \<span class="selector-attr">[全局参数]</span> \<span class="selector-attr">[输入文件参数]</span> \-<span class="selector-tag">i</span> <span class="selector-attr">[输入文件]</span> \<span class="selector-attr">[输出文件参数]</span> \<span class="selector-attr">[输出文件]</span></span><br></pre></td></tr></table></figure><p>下面是一个例子。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg \</span><br><span class="line"></span><br><span class="line">-y \ # 全局参数</span><br><span class="line"></span><br><span class="line">-c:a libfdk_aac -c:v libx264 \ # 输入文件参数</span><br><span class="line"></span><br><span class="line">-i input.mp4 \ # 输入文件</span><br><span class="line"></span><br><span class="line">-c:v libvpx-vp9 -c:a libvorbis \ # 输出文件参数</span><br><span class="line"></span><br><span class="line">output.webm # 输出文件</span><br></pre></td></tr></table></figure><p>上面的命令将 mp4 文件转成 webm 文件，这两个都是容器格式。输入的 mp4 文件的音频编码格式是 aac，视频编码格式是 H.264；输出的 webm 文件的视频编码格式是 VP9，音频格式是 Vorbis。<br>如果不指明编码格式，FFmpeg 会自己判断输入文件的编码。因此，上面的命令可以简单写成下面的样子。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -<span class="selector-tag">i</span> <span class="selector-tag">input</span><span class="selector-class">.avi</span> output.mp4</span><br></pre></td></tr></table></figure><h2 id="FFmpeg推流命令"><a href="#FFmpeg推流命令" class="headerlink" title="FFmpeg推流命令"></a>FFmpeg推流命令</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ffmpeg</span> -re -stream_loop -<span class="number">1</span> -i <span class="string">&quot;/home/fx/video/睡前故事.mp4&quot;</span> -preset ultrafast -vcodec libx264 -g <span class="number">60</span> -b:v <span class="number">1500</span>k -c:a aac -b:a <span class="number">128</span>k -strict -<span class="number">2</span> -f flv <span class="string">&quot;rtmp://live-push.bilivideo.com/live-bvc/?streamname=live_26234208_7077477&amp;key=16498bac00ebba87e45314359ddd437d&amp;schedule=rtmp&amp;pflag=1&quot;</span></span><br></pre></td></tr></table></figure><h2 id="在ubuntu上使用脚本定时监控"><a href="#在ubuntu上使用脚本定时监控" class="headerlink" title="在ubuntu上使用脚本定时监控"></a>在ubuntu上使用脚本定时监控</h2><p>如果你决定保留所有日志，而不仅仅是错误日志，那么你可以维持脚本不做修改，它会继续记录所有的<code>ffmpeg</code>输出消息。你的脚本如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置输入视频文件路径</span></span><br><span class="line">input_video=<span class="string">&quot;/home/video/睡前故事.mp4&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置RTMP推流地址</span></span><br><span class="line">rtmp_url=<span class="string">&quot;rtmp://live-push.bilivideo.com/live-bvc/?streamname=live_26234208_7077477&amp;key=16498bac00ebba87e45314359ddd437d&amp;schedule=rtmp&amp;pflag=1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置日志文件路径</span></span><br><span class="line">log_file=<span class="string">&quot;/home/video/ffmpeg_error_log.txt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查运行状态并重新启动</span></span><br><span class="line"><span class="function"><span class="title">check_and_restart</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> ! pgrep -x <span class="string">&quot;ffmpeg&quot;</span> &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;FFmpeg is not running. Restarting...&quot;</span></span><br><span class="line">        ffmpeg -re -stream_loop -1 -i <span class="string">&quot;<span class="variable">$input_video</span>&quot;</span> -preset ultrafast -vcodec libx264 -g 60 -b:v 1500k -c:a aac -b:a 128k -strict -2 -f flv <span class="string">&quot;<span class="variable">$rtmp_url</span>&quot;</span> 2&gt;&gt; <span class="string">&quot;<span class="variable">$log_file</span>&quot;</span> &amp;</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主循环，每60秒检查一次</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    check_and_restart</span><br><span class="line">    <span class="built_in">sleep</span> 60</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="docker版ffmpeg"><a href="#docker版ffmpeg" class="headerlink" title="docker版ffmpeg"></a><a href="https://hub.docker.com/r/linuxserver/ffmpeg">docker版ffmpeg</a></h3><p>运行是视频卡顿</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run <span class="attr">--rm</span> -it \</span><br><span class="line">  -v /home/fx/<span class="selector-tag">video</span>:/config \</span><br><span class="line">  linuxserver/ffmpeg:arm64v8-latest \</span><br><span class="line">  -stream_loop -<span class="number">1</span> -<span class="selector-tag">i</span> <span class="string">&quot;/config/睡前故事.mp4&quot;</span> -preset ultrafast -vcodec libx264 -g <span class="number">60</span> -<span class="selector-tag">b</span>:v <span class="number">1500</span>k -c:<span class="selector-tag">a</span> aac -<span class="selector-tag">b</span>:<span class="selector-tag">a</span> <span class="number">128</span>k -strict -<span class="number">2</span> -f flv <span class="string">&quot;rtmp://live-push.bilivideo.com/live-bvc/?streamname=live_26234208_7077477&amp;key=16498bac00ebba87e45314359ddd437d&amp;schedule=rtmp&amp;pflag=1&quot;</span></span><br></pre></td></tr></table></figure><h2 id="常用命令行参数"><a href="#常用命令行参数" class="headerlink" title="常用命令行参数"></a>常用命令行参数</h2><p>FFmpeg 常用的命令行参数如下。</p><ul><li>c：指定编码器</li><li>c copy：直接复制，不经过重新编码（这样比较快）</li><li>c:v：指定视频编码器</li><li>c:a：指定音频编码器</li><li>i：指定输入文件</li><li>an：去除音频流</li><li>vn： 去除视频流</li><li>preset：指定输出的视频质量，会影响文件的生成速度，有以下几个可用的值 ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow。</li><li>y：不经过确认，输出时直接覆盖同名文件。</li></ul><h2 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h2><p>下面介绍 FFmpeg 几种常见用法。</p><h3 id="查看文件信息"><a href="#查看文件信息" class="headerlink" title="查看文件信息"></a>查看文件信息</h3><p>查看视频文件的元信息，比如编码格式和比特率，可以只使用-i参数。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -<span class="selector-tag">i</span> <span class="selector-tag">input</span><span class="selector-class">.mp4</span></span><br></pre></td></tr></table></figure><p>上面命令会输出很多冗余信息，加上-hide_banner参数，可以只显示元信息。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -<span class="selector-tag">i</span> <span class="selector-tag">input</span><span class="selector-class">.mp4</span> -hide_banner</span><br></pre></td></tr></table></figure><h3 id="转换编码格式"><a href="#转换编码格式" class="headerlink" title="转换编码格式"></a>转换编码格式</h3><p>转换编码格式（transcoding）指的是， 将视频文件从一种编码转成另一种编码。比如转成 H.264 编码，一般使用编码器libx264，所以只需指定输出文件的视频编码器即可。</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i [<span class="keyword">input</span>.<span class="keyword">file</span>] -c:v libx264 <span class="keyword">output</span>.mp4</span><br></pre></td></tr></table></figure><p>下面是转成 H.265 编码的写法。</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i [<span class="keyword">input</span>.<span class="keyword">file</span>] -c:v libx265 <span class="keyword">output</span>.mp4</span><br></pre></td></tr></table></figure><h3 id="转换为m3u8格式"><a href="#转换为m3u8格式" class="headerlink" title="转换为m3u8格式"></a>转换为m3u8格式</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ffmpeg</span> -i <span class="string">&quot;D:\下载\Video\睡前故事.mp4&quot;</span> -c:v libx264 -c:a aac -strict -<span class="number">2</span> -f hls -hls_list_size <span class="number">2</span> -hls_time <span class="number">60</span> output.m3u8</span><br></pre></td></tr></table></figure><h3 id="转换容器格式"><a href="#转换容器格式" class="headerlink" title="转换容器格式"></a>转换容器格式</h3><p>转换容器格式（transmuxing）指的是，将视频文件从一种容器转到另一种容器。下面是 mp4 转 webm 的写法。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -<span class="selector-tag">i</span> <span class="selector-tag">input</span><span class="selector-class">.mp4</span> -c copy output.webm</span><br></pre></td></tr></table></figure><p>上面例子中，只是转一下容器，内部的编码格式不变，所以使用-c copy指定直接拷贝，不经过转码，这样比较快。</p><h3 id="调整码率"><a href="#调整码率" class="headerlink" title="调整码率"></a>调整码率</h3><p>调整码率（transrating）指的是，改变编码的比特率，一般用来将视频文件的体积变小。下面的例子指定码率最小为964K，最大为3856K，缓冲区大小为 2000K。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg \</span><br><span class="line">-i input.mp4 \</span><br><span class="line">-minrate 964K -maxrate 3856K -bufsize 2000K \</span><br><span class="line">output.mp4</span><br></pre></td></tr></table></figure><h3 id="改变分辨率（transsizing）"><a href="#改变分辨率（transsizing）" class="headerlink" title="改变分辨率（transsizing）"></a>改变分辨率（transsizing）</h3><p>下面是改变视频分辨率（transsizing）的例子，从 1080p 转为 480p 。</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg <span class="string">\</span></span><br><span class="line">-i input.mp4 <span class="string">\</span></span><br><span class="line">-vf scale=<span class="number">480</span>:-<span class="number">1</span> <span class="string">\</span></span><br><span class="line">output.mp4</span><br></pre></td></tr></table></figure><h3 id="提取音频"><a href="#提取音频" class="headerlink" title="提取音频"></a>提取音频</h3><p>有时，需要从视频里面提取音频（demuxing），可以像下面这样写。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg \</span><br><span class="line">-<span class="selector-tag">i</span> <span class="selector-tag">input</span><span class="selector-class">.mp4</span> \</span><br><span class="line">-vn -c:<span class="selector-tag">a</span> copy \</span><br><span class="line">output.aac</span><br></pre></td></tr></table></figure><p>上面例子中，-vn表示去掉视频，-c:a copy表示不改变音频编码，直接拷贝。</p><h3 id="添加音轨"><a href="#添加音轨" class="headerlink" title="添加音轨"></a>添加音轨</h3><p>添加音轨（muxing）指的是，将外部音频加入视频，比如添加背景音乐或旁白。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg \</span><br><span class="line">-<span class="selector-tag">i</span> <span class="selector-tag">input</span><span class="selector-class">.aac</span> -<span class="selector-tag">i</span> <span class="selector-tag">input</span><span class="selector-class">.mp4</span> \</span><br><span class="line">output.mp4</span><br></pre></td></tr></table></figure><p>上面例子中，有音频和视频两个输入文件，FFmpeg 会将它们合成为一个文件。</p><h3 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h3><p>下面的例子是从指定时间开始，连续对1秒钟的视频进行截图。</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg <span class="string">\</span></span><br><span class="line">-y <span class="string">\</span></span><br><span class="line">-i input.mp4 <span class="string">\</span></span><br><span class="line">-ss <span class="number">00</span>:<span class="number">01</span>:<span class="number">24</span> -t <span class="number">00</span>:<span class="number">00</span>:<span class="number">01</span> <span class="string">\</span></span><br><span class="line">output_%<span class="number">3d</span>.jpg</span><br></pre></td></tr></table></figure><p>如果只需要截一张图，可以指定只截取一帧。</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg <span class="string">\</span></span><br><span class="line">-ss <span class="number">01</span>:<span class="number">23</span>:<span class="number">45</span> <span class="string">\</span></span><br><span class="line">-i input <span class="string">\</span></span><br><span class="line">-vframes <span class="number">1</span> -q:v <span class="number">2</span> <span class="string">\</span></span><br><span class="line">output.jpg</span><br></pre></td></tr></table></figure><p>上面例子中，-vframes 1指定只截取一帧，-q:v 2表示输出的图片质量，一般是1到5之间（1 为质量最高）。</p><h3 id="裁剪"><a href="#裁剪" class="headerlink" title="裁剪"></a>裁剪</h3><p>裁剪（cutting）指的是，截取原始视频里面的一个片段，输出为一个新视频。可以指定开始时间（start）和持续时间（duration），也可以指定结束时间（end）。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -ss <span class="selector-attr">[start]</span> -<span class="selector-tag">i</span> <span class="selector-attr">[input]</span> -t <span class="selector-attr">[duration]</span> -c copy <span class="selector-attr">[output]</span></span><br><span class="line">ffmpeg -ss <span class="selector-attr">[start]</span> -<span class="selector-tag">i</span> <span class="selector-attr">[input]</span> -<span class="selector-tag">to</span> <span class="selector-attr">[end]</span> -c copy <span class="selector-attr">[output]</span></span><br></pre></td></tr></table></figure><p>下面是实际的例子。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ffmpeg</span> -ss <span class="number">00</span>:<span class="number">01</span>:<span class="number">50</span> -i<span class="meta"> [input] -t 10.5 -c copy [output]</span></span><br><span class="line"><span class="attribute">ffmpeg</span> -ss <span class="number">2</span>.<span class="number">5</span> -i<span class="meta"> [input] -to 10 -c copy [output]</span></span><br></pre></td></tr></table></figure><p>上面例子中，-c copy表示不改变音频和视频的编码格式，直接拷贝，这样会快很多。</p><h3 id="为音频添加封面"><a href="#为音频添加封面" class="headerlink" title="为音频添加封面"></a>为音频添加封面</h3><p>有些视频网站只允许上传视频文件。如果要上传音频文件，必须为音频添加封面，将其转为视频，然后上传。</p><p>下面命令可以将音频文件，转为带封面的视频文件。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg \</span><br><span class="line">-loop <span class="number">1</span> \</span><br><span class="line">-<span class="selector-tag">i</span> cover<span class="selector-class">.jpg</span> -<span class="selector-tag">i</span> <span class="selector-tag">input</span><span class="selector-class">.mp3</span> \</span><br><span class="line">-c:v libx264 -c:<span class="selector-tag">a</span> aac -<span class="selector-tag">b</span>:<span class="selector-tag">a</span> <span class="number">192</span>k -shortest \</span><br><span class="line">output.mp4</span><br></pre></td></tr></table></figure><p>上面命令中，有两个输入文件，一个是封面图片cover.jpg，另一个是音频文件input.mp3。-loop 1参数表示图片无限循环，-shortest参数表示音频文件结束，输出视频就结束。</p><h2 id="ffplay-的用法"><a href="#ffplay-的用法" class="headerlink" title="ffplay 的用法"></a>ffplay 的用法</h2><h3 id="主要选项"><a href="#主要选项" class="headerlink" title="主要选项"></a>主要选项</h3><p>ffplay [选项] [‘输入文件’]</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x27;-x width&#x27;        强制以 &quot;width&quot; 宽度显示</span><br><span class="line">&#x27;-y height&#x27;       强制以 &quot;height&quot; 高度显示</span><br><span class="line">&#x27;-an&#x27;             禁止音频</span><br><span class="line">&#x27;-vn&#x27;             禁止视频</span><br><span class="line">&#x27;-ss pos&#x27;         跳转到指定的位置(秒)</span><br><span class="line">&#x27;-t duration&#x27;     播放 &quot;duration&quot; 秒音/视频</span><br><span class="line">&#x27;-bytes&#x27;          按字节跳转</span><br><span class="line">&#x27;-nodisp&#x27;         禁止图像显示(只输出音频)</span><br><span class="line">&#x27;-f fmt&#x27;          强制使用 &quot;fmt&quot; 格式</span><br><span class="line">&#x27;-window_title title&#x27;  设置窗口标题(默认为输入文件名)</span><br><span class="line">&#x27;-loop number&#x27;    循环播放 &quot;number&quot; 次(0将一直循环)</span><br><span class="line">&#x27;-showmode mode&#x27;  设置显示模式</span><br></pre></td></tr></table></figure><p> 可选的 mode ：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- &#x27;0, video&#x27;    显示视频</span><br><span class="line">- &#x27;1, waves&#x27;    显示音频波形</span><br><span class="line">- &#x27;2, rdft&#x27;     显示音频频带</span><br><span class="line">- 默认值为 &#x27;video&#x27;，你可以在播放进行时，按 &quot;w&quot; 键在这几种模式间切换</span><br><span class="line">- &#x27;-i input_file&#x27;   指定输入文件</span><br></pre></td></tr></table></figure><h3 id="一些高级选项"><a href="#一些高级选项" class="headerlink" title="一些高级选项"></a>一些高级选项</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x27;-sync type&#x27;          设置主时钟为音频、视频、或者外部。默认为音频。主时钟用来进行音视频同步</span><br><span class="line">&#x27;-threads count&#x27;      设置线程个数</span><br><span class="line">&#x27;-autoexit&#x27;           播放完成后自动退出</span><br><span class="line">&#x27;-exitonkeydown&#x27;      任意键按下时退出</span><br><span class="line">&#x27;-exitonmousedown&#x27;    任意鼠标按键按下时退出</span><br><span class="line">&#x27;-acodec codec_name&#x27;  强制指定音频解码器为 &quot;codec_name&quot;</span><br><span class="line">&#x27;-vcodec codec_name&#x27;  强制指定视频解码器为 &quot;codec_name&quot;</span><br><span class="line">&#x27;-scodec codec_name&#x27;  强制指定字幕解码器为 &quot;codec_name&quot;</span><br></pre></td></tr></table></figure><h3 id="一些快捷键"><a href="#一些快捷键" class="headerlink" title="一些快捷键"></a>一些快捷键</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x27;q, ESC&#x27;            退出</span><br><span class="line">&#x27;f&#x27;                 全屏</span><br><span class="line">&#x27;p, SPC&#x27;            暂停</span><br><span class="line">&#x27;w&#x27;                 切换显示模式(视频/音频波形/音频频带)</span><br><span class="line">&#x27;s&#x27;                 步进到下一帧</span><br><span class="line">&#x27;left/right&#x27;        快退/快进 10 秒</span><br><span class="line">&#x27;down/up&#x27;           快退/快进 1 分钟</span><br><span class="line">&#x27;page down/page up&#x27; 跳转到前一章/下一章(如果没有章节，快退/快进 10 分钟)</span><br><span class="line">&#x27;mouse click&#x27;       跳转到鼠标点击的位置(根据鼠标在显示窗口点击的位置计算百分比)</span><br></pre></td></tr></table></figure><h3 id="ffplay-高级使用方式"><a href="#ffplay-高级使用方式" class="headerlink" title="ffplay 高级使用方式"></a>ffplay 高级使用方式</h3><ul><li><p>循环播放</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffplay pm.mp4 -<span class="keyword">loop</span> <span class="number">10</span></span><br></pre></td></tr></table></figure></li><li><p>播放 pm.mp4 ，播放完成后自动退出</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffplay -<span class="built_in">auto</span>exit pm.mp4</span><br></pre></td></tr></table></figure></li><li><p>以 320 x 240 的大小播放 test.mp4</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ffplay</span> -x <span class="number">320</span> -y <span class="number">240</span> pm.mp4</span><br></pre></td></tr></table></figure></li><li><p>将窗口标题设置为 “myplayer”，循环播放 2 次  </p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffplay -window_title myplayer -<span class="keyword">loop</span> <span class="number">2</span> pm.mp4</span><br></pre></td></tr></table></figure></li><li><p>播放 双通道 32K 的 PCM 音频数据 </p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ffplay</span> -f s16le -ar <span class="number">32000</span> -ac <span class="number">2</span> test.pcm</span><br></pre></td></tr></table></figure></li></ul><h3 id="ffplay音画同步"><a href="#ffplay音画同步" class="headerlink" title="ffplay音画同步"></a>ffplay音画同步</h3><ul><li><p>ffplay也是一个视频播放器，所以不得不提出来的一个问题是：音画同步。ffplay的音画同步的实现方式其实有三种，分别是：以音频为主时间轴作为同步源，以视频为主时间轴作为同步源，以外部时钟为主时间轴作为同步源。</p></li><li><p>下面就以音频为主时间轴来作为同步源来作为案例进行讲解，而且ffplay默认也是以音频为基准进行对齐的，那么以音频作为对齐基准是如何实现的呢？</p></li><li><p>首先需要说明的是，播放器接收到的视频帧或者音频帧，内部都是会有时间戳（PTS时钟）来标识它实际应该在什么时刻展示，实际的对齐策略如下：比较视频当前的播放时间和音频当前的播放时间，如果视频播放过快，则通过加大延迟或者重复播放来降低视频播放速度，如果视频播放满了，则通过减小延迟或者丢帧来追赶音频播放的时间点。关键就在于音视频时间的比较和延迟的计算，当前在比较的过程中会设置一个阈值，如果超过预设的阈值就应该作出调整（丢帧或者重复渲染），这就是整个对齐策略。</p></li><li><p>在使用ffplay的时候，我们可以明确的指定使用那种对齐方式，比如</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffplay pm.mp4 -<span class="built_in">sync</span> audio</span><br></pre></td></tr></table></figure><p>上面这个命令显式的指定了使用以音频为基准进行音视频同步的方式播放视频文件，当然这也是ffplay的默认播放设置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffplay pm.mp4 -<span class="built_in">sync</span> video</span><br></pre></td></tr></table></figure><p>上面这个命令显式的指定了使用以视频为基准进行音视频同步的方式播放视频文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffplay pm.mp4 -<span class="built_in">sync</span> ext</span><br></pre></td></tr></table></figure><p>上面这个命令显式的指定了使用外部时钟为基准进行音视频同步的方式播放视频文件。</p><p>大家可以分别使用这三种方式进行播放，尝试听一听，做一些快进或者seek的操作，看看不同的对齐策略对最终的播放会产生什么样的影响。</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li><p><a href="https://github.com/leandromoreira/ffmpeg-libav-tutorial#chapter-3---transcoding">FFmpeg libav tutorial</a></p></li><li><p><a href="https://github.com/leandromoreira/digital_video_introduction/blob/master/encoding_pratical_examples.md#split-and-merge-smoothly">Digital video introduction</a></p></li><li><p><a href="http://slhck.info/ffmpeg-encoding-course/">FFmpeg encoding and editing course</a></p></li><li><p><a href="https://dragonquest64.blogspot.com/2019/10/making-slideshows-wffmpeg.html">Making Slideshows w&#x2F;FFMpeg</a></p></li><li><p><a href="https://itsfoss.com/ffmpeg/">The Complete Guide for Using ffmpeg in Linux</a></p></li><li><p><a href="https://bernd.dev/2020/04/adding-subtitles/">Adding subtitles to your videos the easy way</a></p></li><li><p><a href="https://www.cnblogs.com/renhui/p/8458802.html">播放媒体文件的工具ffplay</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FFmpeg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>双开steam及其游戏</title>
      <link href="/2023/07/30/%E5%8F%8C%E5%BC%80steam%E5%8F%8A%E5%85%B6%E6%B8%B8%E6%88%8F/"/>
      <url>/2023/07/30/%E5%8F%8C%E5%BC%80steam%E5%8F%8A%E5%85%B6%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="教程如下："><a href="#教程如下：" class="headerlink" title="教程如下："></a>教程如下：</h2><ol><li><p>关闭蒸汽</p></li><li><p>以管理员身份打开cmd.exe（不是100%确定是否需要管理员）</p></li><li><p>设置变量，whatever 可以是任何值</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set VPROJECT=whatever</span><br></pre></td></tr></table></figure></li><li><p>CD 进入steam目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &quot;C:\Program Files (x86)\Steam&quot;</span><br></pre></td></tr></table></figure></li><li><p>启动第一个窗口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">steam.exe -master_ipc_name_override test1</span><br></pre></td></tr></table></figure></li><li><p>启动第二个窗口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">steam.exe -master_ipc_name_override test2</span><br></pre></td></tr></table></figure></li><li><p>打开两个 Steam 客户端，每个客户端登录不同的帐户</p></li><li><p>在两个steam上添加</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-allowmultiple</span></span><br></pre></td></tr></table></figure><p>到CSGO启动选项</p></li><li><p>在两个实例上从 Steam 库中打开 csgo</p></li><li><p>玩得愉快</p></li></ol><p>这样做的原因是 Steam 使用共享内存和事件来建立从游戏到 Steam 客户端的初始通信。默认情况下，共享内存和事件的名称为</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stea<span class="name">m3</span>Master_SharedMemFile</span><br><span class="line">Stea<span class="name">m3</span>Master_SharedMemLock</span><br></pre></td></tr></table></figure><p>但您可以通过设置环境变量用任何值覆盖 Steam3Master 部分。Steam 启动选项 -master_ipc_name_override 将使用自定义前缀创建这些对象，并为打开的任何游戏设置所需的环境变量，以及使用环境变量。</p><p>仅仅这样仍然不能打开csgo，因为csgo会创建一个互斥锁，并且默认情况下不允许运行两个实例。这就是 -allowmultiple csgo 启动选项的用武之地。但是有一个警告，除非设置 VPROJECT env 变量，否则它将无法工作，所以必须在打开 Steam 之前设置它，以便 csgo 也将继承它，任何值都可以。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> steam </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>conda 基本使用方法</title>
      <link href="/2023/07/26/conda%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
      <url>/2023/07/26/conda%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="conda-常用命令"><a href="#conda-常用命令" class="headerlink" title="conda 常用命令"></a>conda 常用命令</h2><h3 id="查看安装了那些包"><a href="#查看安装了那些包" class="headerlink" title="查看安装了那些包"></a>查看安装了那些包</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">conda list</span></span><br></pre></td></tr></table></figure><h3 id="看当前存在哪些虚拟环境"><a href="#看当前存在哪些虚拟环境" class="headerlink" title="看当前存在哪些虚拟环境"></a>看当前存在哪些虚拟环境</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">conda</span> env list conda <span class="literal">info</span> -e</span><br></pre></td></tr></table></figure><h3 id="检查更新当前的conda"><a href="#检查更新当前的conda" class="headerlink" title="检查更新当前的conda"></a>检查更新当前的conda</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">conda update conda</span></span><br></pre></td></tr></table></figure><h3 id="Python创建虚拟环境"><a href="#Python创建虚拟环境" class="headerlink" title="Python创建虚拟环境"></a>Python创建虚拟环境</h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n your_env_name python<span class="operator">=</span><span class="keyword">x</span>.<span class="keyword">x</span> </span><br></pre></td></tr></table></figure><ul><li>anaconda命令创建python版本为x.x，名字为your_env_name的虚拟环境。your_env_name文件可以在Anaconda安装目录envs文件下找到。</li></ul><h3 id="激活或者切换虚拟环境"><a href="#激活或者切换虚拟环境" class="headerlink" title="激活或者切换虚拟环境"></a>激活或者切换虚拟环境</h3><p> 打开命令行，输入python –version检查当前 python 版本。</p><ul><li><p>Linux:  </p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source <span class="built_in">activate</span> your_env_nam</span><br></pre></td></tr></table></figure></li><li><p>Windows: </p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">activate</span> your_env_name</span><br></pre></td></tr></table></figure></li></ul><h3 id="对虚拟环境中安装额外的包"><a href="#对虚拟环境中安装额外的包" class="headerlink" title="对虚拟环境中安装额外的包"></a>对虚拟环境中安装额外的包</h3><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -n your_env_name [<span class="keyword">package</span>]</span><br></pre></td></tr></table></figure><h3 id="关闭虚拟环境-即从当前环境退出返回使用PATH环境中的默认python版本"><a href="#关闭虚拟环境-即从当前环境退出返回使用PATH环境中的默认python版本" class="headerlink" title="关闭虚拟环境(即从当前环境退出返回使用PATH环境中的默认python版本)"></a>关闭虚拟环境(即从当前环境退出返回使用PATH环境中的默认python版本)</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deactivate env_name</span></span><br></pre></td></tr></table></figure><ul><li><p>或者<code>activate root</code>切回root环境</p></li><li><p>Linux下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> deactivate </span><br></pre></td></tr></table></figure></li></ul><h3 id="删除虚拟环境"><a href="#删除虚拟环境" class="headerlink" title="删除虚拟环境"></a>删除虚拟环境</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="built_in">remove</span> -n your_env_name <span class="comment">--all</span></span><br></pre></td></tr></table></figure><h3 id="删除环境钟的某个包"><a href="#删除环境钟的某个包" class="headerlink" title="删除环境钟的某个包"></a>删除环境钟的某个包</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="built_in">remove</span> --name <span class="variable">$your_env_name</span>  <span class="variable">$package_name</span> </span><br></pre></td></tr></table></figure><h3 id="设置国内镜像"><a href="#设置国内镜像" class="headerlink" title="设置国内镜像"></a>设置国内镜像</h3><ul><li><a href="http://anaconda.org/">http://Anaconda.org</a> 的服务器在国外，安装多个packages时，conda下载的速度经常很慢。清华TUNA镜像源有Anaconda仓库的镜像，将其加入conda的配置即可添加Anaconda的TUNA镜像</li><li>添加Anaconda的TUNA镜像,清华镜像源</li></ul><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda config --add channels https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn</span></span><br></pre></td></tr></table></figure><p>​    </p><ul><li>设置搜索时显示通道地址</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda<span class="built_in"> config </span>--<span class="built_in">set</span> show_channel_urls <span class="literal">yes</span></span><br></pre></td></tr></table></figure><h3 id="恢复默认镜像"><a href="#恢复默认镜像" class="headerlink" title="恢复默认镜像"></a>恢复默认镜像</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda config --remove-key channels</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker版ASF的安装</title>
      <link href="/2023/07/24/docker%E7%89%88ASF%E7%9A%84%E5%AE%89%E8%A3%85/"/>
      <url>/2023/07/24/docker%E7%89%88ASF%E7%9A%84%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h1 id="安装ASF"><a href="#安装ASF" class="headerlink" title="安装ASF"></a>安装ASF</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p <span class="regexp">/root/</span>ASF <span class="comment">#新建可以任意文件夹</span></span><br><span class="line"></span><br><span class="line">docker run -p <span class="number">1242</span>:<span class="number">1242</span> -v <span class="regexp">/root/</span>ASF<span class="regexp">/config:/</span>app<span class="regexp">/config -v /</span>root<span class="regexp">/ASF/</span>plugins:<span class="regexp">/app/</span>plugins --name ASF --pull always justarchi/archisteamfarm:latest</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>此示例假定您将使用单个 ASF 容器，所有配置文件都放在 <code>/opt/docker/ASF/config</code>。 您需要修改此处的配置文件路径以匹配您的环境。 如果您打算编写内容如下的 <code>IPC.config</code> 配置文件，则此 ASF 也能够正常启用 IPC 接口：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Kestrel&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;Endpoints&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;HTTP&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;Url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://*:1242&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="ASF-json"><a href="#ASF-json" class="headerlink" title="ASF.json"></a>ASF.json</h2><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> <span class="string">&quot;AutoRestart&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"> <span class="string">&quot;CommandPrefix&quot;</span>: <span class="string">&quot;!&quot;</span>,</span><br><span class="line"> <span class="string">&quot;ConfirmationsLimiterDelay&quot;</span>: <span class="number">10</span>,</span><br><span class="line"> <span class="string">&quot;ConnectionTimeout&quot;</span>: <span class="number">60</span>,</span><br><span class="line"> <span class="string">&quot;CurrentCulture&quot;</span>: <span class="string">&quot;zh-CN&quot;</span>,</span><br><span class="line"> <span class="string">&quot;Debug&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"> <span class="string">&quot;FarmingDelay&quot;</span>: <span class="number">15</span>,</span><br><span class="line"> <span class="string">&quot;GiftsLimiterDelay&quot;</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">&quot;Headless&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"> <span class="string">&quot;IdleFarmingPeriod&quot;</span>: <span class="number">8</span>,</span><br><span class="line"> <span class="string">&quot;InventoryLimiterDelay&quot;</span>: <span class="number">3</span>,</span><br><span class="line"> <span class="string">&quot;IPC&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"> <span class="string">&quot;IPCPassword&quot;</span>: <span class="string">&quot;password&quot;</span>,</span><br><span class="line"> <span class="string">&quot;IPCPrefixes&quot;</span>: [</span><br><span class="line">  <span class="string">&quot;http://*:1242/&quot;</span></span><br><span class="line"> ],</span><br><span class="line"> <span class="string">&quot;LoginLimiterDelay&quot;</span>: <span class="number">10</span>,</span><br><span class="line"> <span class="string">&quot;MaxFarmingTime&quot;</span>: <span class="number">10</span>,</span><br><span class="line"> <span class="string">&quot;MaxTradeHoldDuration&quot;</span>: <span class="number">15</span>,</span><br><span class="line"> <span class="string">&quot;OptimizationMode&quot;</span>: <span class="number">0</span>,</span><br><span class="line"> <span class="string">&quot;Statistics&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"> <span class="string">&quot;SteamMessagePrefix&quot;</span>: <span class="string">&quot;/me &quot;</span>,</span><br><span class="line"> <span class="string">&quot;SteamOwnerID&quot;</span>: <span class="number">0</span>,</span><br><span class="line"> <span class="string">&quot;SteamProtocols&quot;</span>: <span class="number">7</span>,</span><br><span class="line"> <span class="string">&quot;UpdateChannel&quot;</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">&quot;UpdatePeriod&quot;</span>: <span class="number">24</span>,</span><br><span class="line"> <span class="string">&quot;WebLimiterDelay&quot;</span>: <span class="number">200</span>,</span><br><span class="line"> <span class="string">&quot;WebProxy&quot;</span>: null,</span><br><span class="line"> <span class="string">&quot;WebProxyPassword&quot;</span>: null,</span><br><span class="line"> <span class="string">&quot;WebProxyUsername&quot;</span>: null,</span><br><span class="line"> <span class="string">&quot;Blacklist&quot;</span>: [</span><br><span class="line"><span class="built_in">  730,</span></span><br><span class="line"><span class="built_in">  440,</span></span><br><span class="line"><span class="built_in">  221100,</span></span><br><span class="line"><span class="built_in">  10,</span></span><br><span class="line"><span class="built_in">  240,</span></span><br><span class="line"><span class="built_in">  50,</span></span><br><span class="line"><span class="built_in">  70,</span></span><br><span class="line"><span class="built_in">  500,</span></span><br><span class="line"><span class="built_in">  550,</span></span><br><span class="line"><span class="built_in">  20,</span></span><br><span class="line"><span class="built_in">  30,</span></span><br><span class="line"><span class="built_in">  300,</span></span><br><span class="line"><span class="built_in">  320,</span></span><br><span class="line"><span class="built_in">  40,</span></span><br><span class="line"><span class="built_in">  60,</span></span><br><span class="line"><span class="built_in">  80,</span></span><br><span class="line"><span class="built_in">  360,</span></span><br><span class="line"><span class="built_in">  58610,</span></span><br><span class="line"><span class="built_in">  222880,</span></span><br><span class="line"><span class="built_in">  4000,</span></span><br><span class="line"><span class="built_in">  252490,</span></span><br><span class="line"><span class="built_in">  2100,</span></span><br><span class="line"><span class="built_in">  61700,</span></span><br><span class="line"><span class="built_in">  21970,</span></span><br><span class="line"><span class="built_in">  1250,</span></span><br><span class="line"><span class="built_in">  204300,</span></span><br><span class="line"><span class="built_in">  219640,</span></span><br><span class="line"><span class="built_in">  10180,</span></span><br><span class="line"><span class="built_in">  115300,</span></span><br><span class="line"><span class="built_in">  42700,</span></span><br><span class="line"><span class="built_in">  2400,</span></span><br><span class="line"><span class="built_in">  216250,</span></span><br><span class="line"><span class="built_in">  255220,</span></span><br><span class="line"><span class="built_in">  65800,</span></span><br><span class="line"><span class="built_in">  4920,</span></span><br><span class="line"><span class="built_in">  35450,</span></span><br><span class="line"><span class="built_in">  44350,</span></span><br><span class="line"><span class="built_in">  221040,</span></span><br><span class="line"><span class="built_in">  70000,</span></span><br><span class="line"><span class="built_in">  282800,</span></span><br><span class="line"><span class="built_in">  227100,</span></span><br><span class="line"><span class="built_in">  215470,</span></span><br><span class="line"><span class="built_in">  222480,</span></span><br><span class="line"><span class="built_in">  208090,</span></span><br><span class="line"><span class="built_in">  243800,</span></span><br><span class="line"><span class="built_in">  17710,</span></span><br><span class="line"><span class="built_in">  1200,</span></span><br><span class="line"><span class="built_in">  63000,</span></span><br><span class="line"><span class="built_in">  63500,</span></span><br><span class="line"><span class="built_in">  61730,</span></span><br><span class="line"><span class="built_in">  45500,</span></span><br><span class="line"><span class="built_in">  63200,</span></span><br><span class="line"><span class="built_in">  39000,</span></span><br><span class="line"><span class="built_in">  224260,</span></span><br><span class="line"><span class="built_in">  223710,</span></span><br><span class="line"><span class="built_in">  104900,</span></span><br><span class="line"><span class="built_in">  55110,</span></span><br><span class="line"><span class="built_in">  247730,</span></span><br><span class="line"><span class="built_in">  55100,</span></span><br><span class="line"><span class="built_in">  6510,</span></span><br><span class="line"><span class="built_in">  214360,</span></span><br><span class="line"><span class="built_in">  214630,</span></span><br><span class="line"><span class="built_in">  63970,</span></span><br><span class="line"><span class="built_in">  42160,</span></span><br><span class="line"><span class="built_in">  204080,</span></span><br><span class="line"><span class="built_in">  212410,</span></span><br><span class="line"><span class="built_in">  209610,</span></span><br><span class="line"><span class="built_in">  201070,</span></span><br><span class="line"><span class="built_in">  244630,</span></span><br><span class="line">  <span class="number">91310</span></span><br><span class="line"> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>简单介绍几个重要的配置：</p><ul><li><strong>“Blacklist”</strong>：不挂卡的游戏 (这里排除了所有带 <strong>VAC</strong> 的游戏)</li><li><strong>“SteamOwnerID”</strong>：<strong>ASF</strong> 所有者的 <code>SteamID</code>；<strong>ASF</strong> 所有者可以使用全局指令 (例如：<code>!exit</code>、<code>!restart</code>、<code>!update</code> 等 )<br>获取 <code>SteamID</code> 的方法：<a href="https://zhuanlan.zhihu.com/p/28256575">怎么获取 SteamID？</a></li></ul><p>详细的配置说明请参考：<a href="https://mogeko.me/posts/zh-cn/036/#asf-json-%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E">ASF.json 详细配置说明</a></p>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git的使用</title>
      <link href="/2023/07/24/git%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/07/24/git%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="git全局设置、查看、取消代理"><a href="#git全局设置、查看、取消代理" class="headerlink" title="git全局设置、查看、取消代理"></a>git全局设置、查看、取消代理</h2><p>下面两种二选一就可以了</p><h3 id="设置socks5代理"><a href="#设置socks5代理" class="headerlink" title="设置socks5代理"></a>设置socks5代理</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config <span class="attr">--global</span> http<span class="selector-class">.proxy</span> <span class="string">&#x27;socks5://127.0.0.1:10808&#x27;</span> </span><br><span class="line">git config <span class="attr">--global</span> https<span class="selector-class">.proxy</span> <span class="string">&#x27;socks5://127.0.0.1:10808&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="设置github-com代理"><a href="#设置github-com代理" class="headerlink" title="设置github.com代理"></a>设置github.com代理</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http.https:<span class="regexp">//gi</span>thub.com.proxy=socks5:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8080</span></span><br><span class="line">https.https:<span class="regexp">//gi</span>thub.com.proxy=socks5:<span class="regexp">//</span><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8080</span></span><br></pre></td></tr></table></figure><h3 id="设置http代理"><a href="#设置http代理" class="headerlink" title="设置http代理"></a>设置http代理</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config <span class="attr">--global</span> http<span class="selector-class">.proxy</span> <span class="string">&#x27;http://127.0.0.1:10809&#x27;</span> </span><br><span class="line">git config <span class="attr">--global</span> https<span class="selector-class">.proxy</span> <span class="string">&#x27;http://127.0.0.1:10809&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="查看代理"><a href="#查看代理" class="headerlink" title="查看代理"></a>查看代理</h3> <figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global --<span class="built_in">get</span> http.proxy</span><br><span class="line">git<span class="built_in"> config </span>--global --<span class="built_in">get</span> https.proxy</span><br></pre></td></tr></table></figure><h3 id="取消代理："><a href="#取消代理：" class="headerlink" title="取消代理："></a>取消代理：</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config <span class="attr">--global</span> <span class="attr">--unset</span> http<span class="selector-class">.proxy</span></span><br><span class="line">git config <span class="attr">--global</span> <span class="attr">--unset</span> https.proxy</span><br></pre></td></tr></table></figure><h3 id="取消github-com代理"><a href="#取消github-com代理" class="headerlink" title="取消github.com代理"></a>取消github.com代理</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config <span class="attr">--global</span> <span class="attr">--unset</span> http<span class="selector-class">.https</span>:<span class="comment">//github.com.proxy</span></span><br><span class="line">git config <span class="attr">--global</span> <span class="attr">--unset</span> https<span class="selector-class">.https</span>:<span class="comment">//github.com.proxy</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git的使用 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>n1安装armbian以及安装docker、openwrt</title>
      <link href="/2023/07/24/n1%E5%AE%89%E8%A3%85armbian%E4%BB%A5%E5%8F%8A%E5%AE%89%E8%A3%85docker%E3%80%81openwrt/"/>
      <url>/2023/07/24/n1%E5%AE%89%E8%A3%85armbian%E4%BB%A5%E5%8F%8A%E5%AE%89%E8%A3%85docker%E3%80%81openwrt/</url>
      
        <content type="html"><![CDATA[<p>参考教程 ：[<a href="https://www.right.com.cn/forum/forum.php?mod=forumdisplay&fid=158&filter=typeid&typeid=21">N1盒子]</a> <strong>N1刷Armbian系统并在Docker中安装OpenWrt旁路由的详细教程</strong></p><h2 id="刷入Armbian"><a href="#刷入Armbian" class="headerlink" title="刷入Armbian"></a>刷入Armbian</h2><p>Armbian（下载地址）：<a href="https://github.com/ophub/amlogic-s9xxx-armbian">Armbian</a></p><p>输入官方写入EMMC命令：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">armbian-<span class="keyword">install</span></span><br></pre></td></tr></table></figure><h2 id="安装及升级-Armbian-的相关说明"><a href="#安装及升级-Armbian-的相关说明" class="headerlink" title="安装及升级 Armbian 的相关说明"></a>安装及升级 Armbian 的相关说明</h2><p>中文说明：<a href="https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/README.cn.md">https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/README.cn.md</a></p><h3 id="更新-Armbian-内核"><a href="#更新-Armbian-内核" class="headerlink" title="更新 Armbian 内核"></a>更新 Armbian 内核</h3><p>登录 Armbian 系统 → 输入命令：</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 root 用户运行 (sudo -i)</span></span><br><span class="line"><span class="comment"># 如果不指定参数，将更新为最新版本。</span></span><br><span class="line">armbian-<span class="keyword">update</span></span><br></pre></td></tr></table></figure><h3 id="安装常用软件"><a href="#安装常用软件" class="headerlink" title="安装常用软件"></a>安装常用软件</h3><p>登录 Armbian 系统 → 输入命令：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">armbian-software</span></span><br></pre></td></tr></table></figure><p>使用 <code>armbian-software -u</code> 命令可以更新本地的软件中心列表。根据用户在 <a href="https://github.com/ophub/amlogic-s9xxx-armbian/issues">Issue</a> 中的需求反馈，逐步整合常用<a href="https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/build-armbian/armbian-files/common-files/usr/share/ophub/armbian-software/software-list.conf">软件</a>，实现一键安装&#x2F;更新&#x2F;卸载等快捷操作。包括 <code>docker 镜像</code>、<code>桌面软件</code>、<code>应用服务</code> 等。详见更多<a href="https://github.com/ophub/amlogic-s9xxx-armbian/blob/main/build-armbian/documents/armbian_software.md">说明</a>。</p><h3 id="修改-Armbian-配置"><a href="#修改-Armbian-配置" class="headerlink" title="修改 Armbian 配置"></a>修改 Armbian 配置</h3><p>登录 Armbian 系统 → 输入命令：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">armbian-config</span><br></pre></td></tr></table></figure><h3 id="为-Armbian-创建-swap"><a href="#为-Armbian-创建-swap" class="headerlink" title="为 Armbian 创建 swap"></a>为 Armbian 创建 swap</h3><p>如果你在使用 <code>docker</code> 等内存占用较大的应用时，觉得当前盒子的内存不够使用，可以创建 <code>swap</code> 虚拟内存分区，将磁盘空间的一定容量虚拟成内存来使用。下面命令输入参数的单位是 <code>GB</code>，默认为 <code>1</code>。</p><p>登录 Armbian 系统 → 输入命令：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">armbian</span>-swap <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="备份-还原-EMMC-原系统"><a href="#备份-还原-EMMC-原系统" class="headerlink" title="备份&#x2F;还原 EMMC 原系统"></a>备份&#x2F;还原 EMMC 原系统</h3><p>支持在 <code>TF/SD/USB</code> 中对盒子的 <code>EMMC</code> 分区进行备份&#x2F;恢复。建议您在全新的盒子里安装 Armbian 系统前，先对当前盒子自带的安卓 TV 系统进行备份，以便日后在恢复电视系统等情况下使用。</p><p>请从 <code>TF/SD/USB</code> 启动 Armbian 系统 → 输入命令：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">armbian-ddbr</span></span><br></pre></td></tr></table></figure><p>详情访问github</p><h3 id="清华源-etc-apt-sources-list"><a href="#清华源-etc-apt-sources-list" class="headerlink" title="清华源 &#x2F;etc&#x2F;apt&#x2F;sources.list"></a>清华源 &#x2F;etc&#x2F;apt&#x2F;sources.list</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free</span><br></pre></td></tr></table></figure><h2 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h2><p>apt install docker.io</p><h3 id="安装docker管理面板"><a href="#安装docker管理面板" class="headerlink" title="安装docker管理面板"></a>安装docker管理面板</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create portainer_data</span><br></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p <span class="number">8000</span>:<span class="number">8000</span> -p <span class="number">9000</span>:<span class="number">9000</span> --name=portainer --restart=always -v <span class="regexp">/var/</span>run<span class="regexp">/docker.sock:/</span>var<span class="regexp">/run/</span>docker.sock -v portainer_data:<span class="regexp">/data portainer/</span>portainer:linux-arm64</span><br></pre></td></tr></table></figure><h3 id="安装docker版openwrt"><a href="#安装docker版openwrt" class="headerlink" title="安装docker版openwrt"></a>安装docker版openwrt</h3><p><a href="https://www.right.com.cn/forum/thread-958173-1-1.html">F大教程</a></p><p>开启网卡的混杂模式（这样是为了目前这个阶段能正常安装并配置，要永久开启需修改配置文件，稍后详述）</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="keyword">link</span> <span class="built_in">set</span> eth0 promisc <span class="keyword">on</span></span><br></pre></td></tr></table></figure><p>创建docker的虚拟网络（可用docker network ls查看已创建了哪些）</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker<span class="built_in"> network </span>create -d macvlan <span class="attribute">--subnet</span>=192.168.1.0/24 <span class="attribute">--gateway</span>=192.168.1.1 -o <span class="attribute">parent</span>=eth0 macnet</span><br></pre></td></tr></table></figure><p>拉取镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull unifreq/openwrt-aarch64:latest</span><br><span class="line">docker run --name=openwrt --restart always -d --network macnet --privileged unifreq/openwrt-aarch64:latest /sbin/init</span><br></pre></td></tr></table></figure><h3 id="其他事项"><a href="#其他事项" class="headerlink" title="其他事项"></a>其他事项</h3><p>如此设置后，会存在如下问题：</p><p>同网段设备均可以正常访问（包括ping）N1和op，但N1和op之间是不能互访的【需要将armbian的ip设置为静态的才行】</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>config/network</span><br></pre></td></tr></table></figure><p>设置openwrt的静态地址</p><p>N1重启网卡混杂模式会失效，需设为永久开启</p><p>解决方案是修改&#x2F;etc&#x2F;network&#x2F;interfaces文件：（谨慎操作，可能导致armbian永远无网络）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">auto eth0</span><br><span class="line">iface eth0 inet manual</span><br><span class="line">up ip <span class="built_in">link</span> <span class="built_in">set</span> eth0 promisc on</span><br><span class="line">auto macvlan</span><br><span class="line">iface macvlan inet static</span><br><span class="line">  address 192.168.12.104→修改成你需要的</span><br><span class="line">  netmask 255.255.255.0</span><br><span class="line">  gateway 192.168.12.1→需改成你的主路由ip或192.168.12.5（旁路由的ip）</span><br><span class="line">  dns-nameservers 192.168.12.1→需改成你的主路由ip或12.5或再加1个公共dns比如114</span><br><span class="line">  pre-up ip <span class="built_in">link</span> add macvlan <span class="built_in">link</span> eth0 <span class="built_in">type</span> macvlan mode bridge</span><br><span class="line">  post-down ip <span class="built_in">link</span> del macvlan <span class="built_in">link</span> eth0 <span class="built_in">type</span> macvlan mode bridge</span><br></pre></td></tr></table></figure><p>没有网的原因是没有添加dns服务</p><h2 id="安装docker版clash"><a href="#安装docker版clash" class="headerlink" title="安装docker版clash"></a>安装docker版clash</h2><p>Clash在Docker中的部署</p><p>部署可视化clash dashboard容器</p><p>首先将dashboard的image pull下来。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull haishanh/yacd</span><br></pre></td></tr></table></figure><h4 id="然后直接跑起来就行，注意映射一个没在使用的端口就行"><a href="#然后直接跑起来就行，注意映射一个没在使用的端口就行" class="headerlink" title="然后直接跑起来就行，注意映射一个没在使用的端口就行"></a>然后直接跑起来就行，注意映射一个没在使用的端口就行</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 1234:80 -d haishanh/yacd</span><br></pre></td></tr></table></figure><h4 id="在浏览器键入服务器地址跟端口号，我这里是输入192-168-199-10-1234，就可以打开dashboard页面"><a href="#在浏览器键入服务器地址跟端口号，我这里是输入192-168-199-10-1234，就可以打开dashboard页面" class="headerlink" title="在浏览器键入服务器地址跟端口号，我这里是输入192.168.199.10:1234，就可以打开dashboard页面"></a>在浏览器键入服务器地址跟端口号，我这里是输入192.168.199.10:1234，就可以打开dashboard页面</h4><h2 id="部署clash容器"><a href="#部署clash容器" class="headerlink" title="部署clash容器"></a>部署clash容器</h2><p>准备好你的配置文件config.yaml，节点和订阅得自己想办法!</p><p>将下边的代码覆盖入你原有的基础配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">port:</span> <span class="number">7890</span></span><br><span class="line"><span class="attr">socks-port:</span> <span class="number">7891</span></span><br><span class="line"><span class="comment">#转发端口一定要配置</span></span><br><span class="line"><span class="attr">redir-port:</span> <span class="number">7892</span></span><br><span class="line"><span class="comment">#允许接管局域网流量</span></span><br><span class="line"><span class="attr">allow-lan:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#默认代理模式</span></span><br><span class="line"><span class="attr">mode:</span> <span class="string">Rule</span></span><br><span class="line"><span class="attr">log-level:</span> <span class="string">warning</span></span><br><span class="line"><span class="comment">#接口控制端口你可以自己设置，默认是9090</span></span><br><span class="line"><span class="attr">external-controller:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">:7070</span></span><br><span class="line"><span class="comment">#如果服务器对公网开放可以设置密码</span></span><br><span class="line"><span class="attr">secret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment">#external-ui: dashboard</span></span><br><span class="line"><span class="comment">#配置由clash接管的dns解析</span></span><br><span class="line"><span class="attr">dns:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#主要监听定向转发来的数据，后续会在路由表里配置转发端口为1053</span></span><br><span class="line">  <span class="attr">listen:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">:1053</span></span><br><span class="line">  <span class="attr">enhanced-mode:</span> <span class="string">redir-host</span></span><br><span class="line"><span class="comment">#见下方链接</span></span><br><span class="line">  <span class="attr">nameserver:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;114.114.114.114&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;223.5.5.5&#x27;</span></span><br><span class="line">  <span class="attr">fallback:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;tls://1.1.1.1:853&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;tcp://1.1.1.1:53&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;tcp://208.67.222.222:443&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;tls://dns.google&#x27;</span></span><br></pre></td></tr></table></figure><p>准备好配置文件之后 ，运行如下命令启动clash容器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name Clash -d -v /opt/docker/clash/config.yaml:/root/.config/clash/config.yaml --network macnet --ip 192.168.1.100 --cap-add=NET_ADMIN --privileged dreamacro/clash</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> N1盒子 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> armbian </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WinRAR深度去除弹窗广告</title>
      <link href="/2023/07/09/WinRAR%E6%B7%B1%E5%BA%A6%E5%8E%BB%E9%99%A4%E5%BC%B9%E7%AA%97%E5%B9%BF%E5%91%8A/"/>
      <url>/2023/07/09/WinRAR%E6%B7%B1%E5%BA%A6%E5%8E%BB%E9%99%A4%E5%BC%B9%E7%AA%97%E5%B9%BF%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<h2 id="直接使用该软件即可完成winrar的安装和注册，以下内容可以不看！！！！！"><a href="#直接使用该软件即可完成winrar的安装和注册，以下内容可以不看！！！！！" class="headerlink" title="直接使用该软件即可完成winrar的安装和注册，以下内容可以不看！！！！！"></a>直接使用该软件即可完成winrar的安装和注册，以下内容可以不看！！！！！</h2><p><a href="https://github.com/lvtx/WinRAR-Extractor">WinRAR-Extractor</a></p><h2 id="WinRAR-是一款不错的解压缩软件，但还是收费软件，广告不少，今天就总结了一下网上的各路教程"><a href="#WinRAR-是一款不错的解压缩软件，但还是收费软件，广告不少，今天就总结了一下网上的各路教程" class="headerlink" title="WinRAR 是一款不错的解压缩软件，但还是收费软件，广告不少，今天就总结了一下网上的各路教程"></a>WinRAR 是一款不错的解压缩软件，但还是收费软件，广告不少，今天就总结了一下网上的各路教程</h2><p><a href="https://www.52pojie.cn/forum.php?mod=viewthread&tid=1143884&highlight=rar">本教程搬运自吾爱破解论坛</a></p><p>首先通过特殊方式获取软件许可：<br>新建一个文本文档</p><p>在这个文本文档里输入内容：</p><img src="密钥.png" alt="密钥" /><p>纯文本查看</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">RAR registration data</span><br><span class="line">Federal Agency for Education</span><br><span class="line">1000000 PC usage license</span><br><span class="line">UID=b621cca9a84bc5deffbf</span><br><span class="line">6412612250ffbf533df6db2dfe8ccc3aae5362c06d54762105357d</span><br><span class="line">5e3b1489e751c76bf6e0640001014be50a52303fed29664b074145</span><br><span class="line">7e567d04159ad8defc3fb6edf32831fd1966f72c21c0c53c02fbbb</span><br><span class="line">2f91cfca671d9c482b11b8ac3281cb21378e85606494da349941fa</span><br><span class="line">e9ee328f12dc73e90b6356b921fbfb8522d6562a6a4b97e8ef6c9f</span><br><span class="line">fb866be1e3826b5aa126a4d2bfe9336ad63003fc0e71c307fc2c60</span><br><span class="line">64416495d4c55a0cc82d402110498da970812063934815d81470829275</span><br></pre></td></tr></table></figure><p>然后将文件名改为：<strong>rar</strong>reg.key</p><img src="214226p1hhh4syyssy0ocy.png" alt="" /><p>再将这个文件导入WinRAR的安装文件夹</p><img src="214322q3iy77nlx3bmy5lc.png" alt="" /><img src="214418hzbk2k2i0qjtboxg.png" alt="" /><p>这时点开关于WinRAR，已经获取许可。</p><img src="214523wozu2ik8ry808o88.png" alt="" /><p>接下来使用Resource Hacker软件打开winrar.exe</p><img src="214704hbjodro9drbf062r.png" alt="" /><p>进入字串表，找到“80”，删除“1267”和“1277”行<br>点击绿色三角形按钮，编译。</p><img src="215135ubka54huovatfojh.png" alt="" /><p>然后：文件→另存为，进行保存。</p><img src="220229qbsuhlbw4el40hs0.jpg" alt="" /><p>然后对源文件：winrar.exe进行替换,注意，要关闭winrar软件</p><img src="220929hpwlol99o99apph3.png" />]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WinRAR </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wrap-cli的使用</title>
      <link href="/2023/07/08/wrap-cli%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/07/08/wrap-cli%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>现在纯 IPv6、nat IPv4 VPS 越来越多了，于是有人发现可以用 warp 解锁 Netflix、解决 Google 送中问题，但是大多数教程和一键脚本都是用 <a href="https://github.com/ViRb3/wgcf">wgcf</a> 来实现的。其实 wgcf 有相对不低的延迟，大部分情况下使用这种方案会造成打开网页缓慢的问题。因此我们可以利用 warp 官方客户端来提供 socks5 给别的软件分流使用。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>以 <code>Debian 11</code> 为例：</p><p>首先，安装存储库的 GPG 密钥：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install sudo gpg</span><br><span class="line">curl https:<span class="regexp">//</span>pkg.cloudflareclient.com<span class="regexp">/pubkey.gpg | sudo gpg --yes --dearmor --output /u</span>sr<span class="regexp">/share/</span>keyrings/cloudflare-warp-archive-keyring.gpg</span><br></pre></td></tr></table></figure><p>然后添加存储库：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;deb [arch=amd64 signed-by=/usr/share/keyrings/cloudflare-warp-archive-keyring.gpg] https://pkg.cloudflareclient.com/ bullseye main&#x27; | sudo tee /etc/apt/sources.list.d/cloudflare-client.list</span><br></pre></td></tr></table></figure><p>更新 APT 缓存：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><p>安装 <code>Cloudflare WARP</code></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> cloudflare-warp</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>注册一个 warp 账号：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">warp-cli <span class="keyword">register</span></span><br></pre></td></tr></table></figure><p>如果想要使用已经有的账号则可以指定 <code>license</code> (1.1.1.1 app 右上角 - 账户 - 按键），可以通过邀请新用户的方式为账号添加 warp + 高级流量，也可以通过脚本刷流量，<a href="https://yushum.com/archives/580">点击前往教程</a>。</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">warp-cli</span> <span class="built_in">set-license</span> &lt;<span class="string">key</span>&gt;  //将&lt;<span class="string">key</span>&gt;替换为你的<span class="string">license</span></span><br></pre></td></tr></table></figure><p>修改 warp-cli 运行模式：</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">warp-cli</span> <span class="built_in">set-mode</span> <span class="string">proxy</span></span><br></pre></td></tr></table></figure><p>设置监听端口：</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">warp-cli</span> <span class="built_in">set-proxy-port</span> <span class="string">10086</span></span><br></pre></td></tr></table></figure><p>连接：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">warp-cli connect</span><br></pre></td></tr></table></figure><p>查看当前 warp 的 IP：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">curl</span> -<span class="number">4</span> ip.gs -x socks5://<span class="number">127.0.0.1:10086</span></span><br></pre></td></tr></table></figure><p>然后我们就可以将其他软件需要分流的流量转发到 10086 端口了。</p><p>以 <code>Xray/V2Ray</code> 为例：</p><p>在配置文件中的添加 <code>outbounds</code>：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      &quot;protocol&quot;: <span class="string">&quot;socks&quot;</span>,</span><br><span class="line">      <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">         &quot;servers&quot;: [&#123;</span><br><span class="line">            &quot;<span class="selector-tag">address</span>&quot;: <span class="string">&quot;127.0.0.1&quot;</span>,</span><br><span class="line">            <span class="string">&quot;port&quot;</span>: <span class="number">10086</span></span><br><span class="line">         &#125;]</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;tag&quot;: <span class="string">&quot;warp&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在路由 <code>routing</code> 中加入：</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;type&quot;</span>: <span class="string">&quot;field&quot;</span>,</span><br><span class="line"><span class="string">&quot;outboundTag&quot;</span>: <span class="string">&quot;warp&quot;</span>,</span><br><span class="line"><span class="string">&quot;domain&quot;</span>: [</span><br><span class="line"><span class="string">&quot;geosite:netflix&quot;</span></span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后重启即可：</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">restart</span> xray.service</span><br></pre></td></tr></table></figure><p>测试无误之后便可以设置 warp-cli 长期运行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">warp-cli enable-always-on</span><br></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>这种方案相较于目前流行的 wireguard 方案的优势就是可以只分流需要分流的流量，其他无论什么流量都不会受到影响。</p><p>另外 wireguard 的方案会造成 docker 的 bridge 模式无法使用，这种方案可以完美解决。</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ol><li><a href="https://blog.cloudflare.com/announcing-warp-for-linux-and-proxy-mode/">Announcing WARP for Linux and Proxy Mode</a></li><li><a href="https://pkg.cloudflareclient.com/install">Cloudflare Package Repository</a></li></ol><iframe height="1" width="1" style="box-sizing: border-box; border: none; color: rgb(82, 95, 127); font-family: &quot;Noto Serif SC&quot;, serif, system-ui; font-size: 17px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; top: 0px; left: 0px; visibility: hidden;"></iframe><h2 id="xray的配置文件"><a href="#xray的配置文件" class="headerlink" title="xray的配置文件"></a>xray的配置文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;outbounds&quot;:[</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;protocol&quot;:&quot;freedom&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;tag&quot;:&quot;warp&quot;,</span><br><span class="line">            &quot;protocol&quot;:&quot;socks&quot;,</span><br><span class="line">            &quot;settings&quot;:&#123;</span><br><span class="line">                &quot;servers&quot;:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;address&quot;:&quot;127.0.0.1&quot;,</span><br><span class="line">                        &quot;port&quot;:40000</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;tag&quot;:&quot;WARP-socks5-v4&quot;,</span><br><span class="line">            &quot;protocol&quot;:&quot;freedom&quot;,</span><br><span class="line">            &quot;settings&quot;:&#123;</span><br><span class="line">                &quot;domainStrategy&quot;:&quot;UseIPv4&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;proxySettings&quot;:&#123;</span><br><span class="line">                &quot;tag&quot;:&quot;warp&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;tag&quot;:&quot;WARP-socks5-v6&quot;,</span><br><span class="line">            &quot;protocol&quot;:&quot;freedom&quot;,</span><br><span class="line">            &quot;settings&quot;:&#123;</span><br><span class="line">                &quot;domainStrategy&quot;:&quot;UseIPv6&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;proxySettings&quot;:&#123;</span><br><span class="line">                &quot;tag&quot;:&quot;warp&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;routing&quot;:&#123;</span><br><span class="line">        &quot;rules&quot;:[</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;type&quot;:&quot;field&quot;,</span><br><span class="line">                &quot;domain&quot;:[</span><br><span class="line">                    &quot;geosite:openai&quot;,</span><br><span class="line">                    &quot;ip.gs&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;outboundTag&quot;:&quot;WARP-socks5-v4&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;type&quot;:&quot;field&quot;,</span><br><span class="line">                &quot;domain&quot;:[</span><br><span class="line">                    &quot;geosite:google&quot;,</span><br><span class="line">                    &quot;geosite:netflix&quot;,</span><br><span class="line">                    &quot;p3terx.com&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;outboundTag&quot;:&quot;WARP-socks5-v6&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="原配置备份"><a href="#原配置备份" class="headerlink" title="原配置备份"></a>原配置备份</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;api&quot;: &#123;</span><br><span class="line">    &quot;services&quot;: [</span><br><span class="line">      &quot;HandlerService&quot;,</span><br><span class="line">      &quot;LoggerService&quot;,</span><br><span class="line">      &quot;StatsService&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;tag&quot;: &quot;api&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;inbounds&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;listen&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">      &quot;port&quot;: 62789,</span><br><span class="line">      &quot;protocol&quot;: &quot;dokodemo-door&quot;,</span><br><span class="line">      &quot;settings&quot;: &#123;</span><br><span class="line">        &quot;address&quot;: &quot;127.0.0.1&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;tag&quot;: &quot;api&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;outbounds&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;protocol&quot;: &quot;freedom&quot;,</span><br><span class="line">      &quot;settings&quot;: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;protocol&quot;: &quot;blackhole&quot;,</span><br><span class="line">      &quot;settings&quot;: &#123;&#125;,</span><br><span class="line">      &quot;tag&quot;: &quot;blocked&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;policy&quot;: &#123;</span><br><span class="line">    &quot;system&quot;: &#123;</span><br><span class="line">      &quot;statsInboundDownlink&quot;: true,</span><br><span class="line">      &quot;statsInboundUplink&quot;: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;routing&quot;: &#123;</span><br><span class="line">    &quot;rules&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;inboundTag&quot;: [</span><br><span class="line">          &quot;api&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;outboundTag&quot;: &quot;api&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;field&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;ip&quot;: [</span><br><span class="line">          &quot;geoip:private&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;outboundTag&quot;: &quot;blocked&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;field&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;outboundTag&quot;: &quot;blocked&quot;,</span><br><span class="line">        &quot;protocol&quot;: [</span><br><span class="line">          &quot;bittorrent&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;type&quot;: &quot;field&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;stats&quot;: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wrap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>火柴人 vs 数学(Math)</title>
      <link href="/2023/06/27/%E7%81%AB%E6%9F%B4%E4%BA%BAvs%E6%95%B0%E5%AD%A6(Math)/"/>
      <url>/2023/06/27/%E7%81%AB%E6%9F%B4%E4%BA%BAvs%E6%95%B0%E5%AD%A6(Math)/</url>
      
        <content type="html"><![CDATA[<h2 id="火柴人-VS-数学-Math"><a href="#火柴人-VS-数学-Math" class="headerlink" title="火柴人 VS 数学(Math)"></a>火柴人 VS 数学(Math)</h2><div class="bili_video"><iframe src="https://player.bilibili.com/player.html?aid=615209469&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" width="600" height="452" allowfullscreen="true"> </iframe></div><h2 id="Hexo标签-哔哩哔哩"><a href="#Hexo标签-哔哩哔哩" class="headerlink" title="Hexo标签 哔哩哔哩"></a><a href="https://github.com/Z4Tech/hexo-tag-bilibili">Hexo标签 哔哩哔哩</a></h2><p>在 Hexo 帖子&#x2F;页面中嵌入哔哩哔哩视频</p><h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><blockquote><p>这是一个 <a href="http://hexo.io/">Hexo</a> 标签插件，用于在帖子&#x2F;页面中嵌入 <a href="http://bilibili.com/">哔哩哔哩</a>视频</p></blockquote><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="comment">--save hexo-tag-bilibili</span></span><br></pre></td></tr></table></figure><h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p>完整标签格式如下：</p><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name">bilibili</span> [av_id] %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">or</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">bilibili</span> [av_id] [page] %&#125;</span></span><br></pre></td></tr></table></figure><p>例：</p><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;%</span> <span class="name">bilibili</span> <span class="number">2333333</span> <span class="number">3</span> <span class="template-tag">%&#125;</span></span><br></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>您可以在主 _config.yml 中配置类型、自动播放和大小：</p><p>配置示例：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">bilibili:</span></span><br><span class="line"><span class="symbol">  width:</span> <span class="number">452</span></span><br><span class="line"><span class="symbol">  height:</span> <span class="number">544</span></span><br></pre></td></tr></table></figure><h2 id="风格"><a href="#风格" class="headerlink" title="风格"></a>风格</h2><p>视频剪辑由带有类的 div 包装。您可以在主题的 css 文件中修改它。<code>bili_video</code></p><h2 id="许可证"><a href="#许可证" class="headerlink" title="许可证"></a>许可证</h2><p>版权所有 （c） 2015， Z4Tech.根据 <a href="https://github.com/Z4Tech/hexo-tag-bilibili/blob/master/LICENSE">MIT 许可证</a>获得许可</p>]]></content>
      
      
      <categories>
          
          <category> 视频 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>steam游戏</title>
      <link href="/2023/06/27/steam%E6%B8%B8%E6%88%8F/"/>
      <url>/2023/06/27/steam%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="csgo"><a href="#csgo" class="headerlink" title="csgo"></a>csgo</h2><iframe src="https://store.steampowered.com/widget/730/" frameborder="0" width="100%" height="190"></iframe><h2 id="巫师三"><a href="#巫师三" class="headerlink" title="巫师三"></a>巫师三</h2><iframe src="https://store.steampowered.com/widget/292030/" frameborder="0" width="100%" height="190"></iframe><h1 id="hexo-tag-steamgame"><a href="#hexo-tag-steamgame" class="headerlink" title="hexo-tag-steamgame"></a>hexo-tag-steamgame</h1><p>在Hexo博客中嵌入steam游戏。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-steamgame <span class="comment">--save</span></span><br></pre></td></tr></table></figure><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><ul><li>嵌入单个游戏</li></ul><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name">steamgame</span> appid description %&#125;</span></span><br></pre></td></tr></table></figure><ul><li>批量嵌入游戏</li></ul><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name">steamgames</span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">appid</span></span><br><span class="line"><span class="language-xml">appid</span></span><br><span class="line"><span class="language-xml">appid</span></span><br><span class="line"><span class="language-xml">appid</span></span><br><span class="line"><span class="language-xml">appid</span></span><br><span class="line"><span class="language-xml">appid</span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name">endsteamgames</span> %&#125;</span></span><br></pre></td></tr></table></figure><h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">appid: Steam 游戏 id.</span><br><span class="line"><span class="function"><span class="title">description</span><span class="params">(可选)</span></span>: 用于替换默认游戏简介。</span><br></pre></td></tr></table></figure><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p><a href="https://blog.hclonely.cn/posts/94295339/#demo">https://blog.hclonely.com/posts/94295339/#demo</a></p><h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p><a href="https://github.com/HCLonely/hexo-tag-steamgame/blob/master/LICENSE">MIT</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2020/06/27/hello-world/"/>
      <url>/2020/06/27/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. <span id="more"></span>Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
